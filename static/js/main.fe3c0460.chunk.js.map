{"version":3,"sources":["../node_modules/encoding/lib sync","helpers/file.js","models/dialogs.js","actions/dialogs.js","actions/messages.js","actions/selectedDialog.js","actions/users.js","actions/currentUser.js","reducers/reducer-function.js","reducers/index.js","reducers/currentUser.js","reducers/dialogs.js","reducers/selectedDialog.js","reducers/messages.js","reducers/users.js","store.js","models/message.js","models/user.js","helpers/constants.js","services/chat-service.js","services/auth-service.js","assets/logo_with_text.png","helpers/loader/loader.js","components/auth/auth.js","helpers/avatar/avatar.js","components/home/sideBar/userProfile/userProfile.js","helpers/LayoutUtil.js","helpers/lastDate.js","components/home/sideBar/dialogs/dialogs.js","components/home/sideBar/sideBar.js","helpers/imagePicker/cropImage.js","helpers/imagePicker/imagePicker.js","components/home/chat/chatInput/chatInput.js","services/users-service.js","components/home/chat/message/messageStatus.js","components/home/chat/message/message.js","components/home/chat/chat.js","components/home/splashPage/splashPage.js","components/home/createDialog/createDialogHeader/header.js","components/home/createDialog/renderUser/renderUser.js","components/home/createDialog/createDialog.js","components/home/home.js","components/main.js","serviceWorker.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","getImageLinkFromUID","uid","ConnectyCube","storage","privateUrl","Dialog","dialog","this","_id","type","xmpp_room_jid","xmpp_type","name","photo","getAvatarUrl","description","destination","room_jid","user_id","admins_ids","occupants_ids","updated_date","Date","parse","updated_at","now","last_message_date_sent","created_at","last_message","last_message_id","last_message_user_id","unread_messages_count","unread_messages_ids","pinned_messages_ids","avatarUID","FETCH_DIALOGS","ADD_DIALOG","SORT_DIALOGS","UPDATE_DIALOG","DELETE_DIALOG","fetchDialogs","dialogs","updateDialog","addNewDialog","sortDialogs","message","count","FETCH_MESSAGES","PUSH_MESSAGE","DELETE_ALL_MESSAGES","LAZY_FETCH_MESSAGES","UPDATE_MESSAGES","updateMessages","dialogId","msgId","msg","pushMessage","SELECTED_DIALOG","UN_SELECTED_DIALOG","FETCH_USERS","fetchUsers","users","SET_CURRENT_USER","RESET_CURRENT_USER","UPDATE_CURRENT_USER","setCurrentUser","currentUser","action","alreadyUpdatedDialog","map","elem","Object","assign","lazyFetchMessages","messages","newArr","history","reverse","concat","sortedDialog","result","items","inverted","sort","itemA","itemB","dialog_id","newObj","body","date_sent","updateStatusMessages","length","newMessages","index","updateSendStatus","send_state","newObjUsers","forEach","appReducer","combineReducers","user","filter","selectedDialog","reverted","mergedUpdatedMessages","rootReducer","state","store","createStore","GROUP_CHAT_ALERT_TYPE","defaultMessage","Math","floor","attachments","sender_id","sender","Message","group_chat_alert_type","chat_dialog_id","extension","getSendState","attachment","getAttachment","parseLink","url","read_ids","find","delivered_ids","FakeMessage","undefined","User","avatar","login","custom_data","full_name","phone","last_request_at","DIALOG_TYPE","chatService","getMoreMessages","a","currentMessages","getMessagesByDialogId","lastMessageDate","updateObj","last_messages_for_fetch","lt","sort_desc","chat","list","moreHistoryFromServer","push","dispatch","amountMessages","sendMsgChatAlertOnCreate","alertType","date","recipient_id","messageExtensions","save_to_history","send","updateDialogsUnreadMessagesCount","onMessageListener","bind","onSentMessageCallback","onSentMessageListener","onDeliveredStatusListener","onDeliveredStatus","onReadStatusListener","onReadStatus","getState","dialogsFromServer","currentUserId","privatChatIdsUser","getUsersList","usersInfo","isAlredyUpdate","isAlreadyMessageFetch","historyFromServer","firstUnreadMsg","readAllMessages","sendReadStatus","messageText","scrollToBottom","text","trim","messageUniqueId","sendMessageAsAttachment","newObjFreez","freeze","URL","createObjectURL","file","uploadPhoto","response","newObjAttach","size","content_type","width","height","userId","params","create","getUserFromReduxById","getUserFromServerById","UserModel","groupName","img","unshift","image","newDialog","update","read","messageId","senderId","getSelectedDialog","readMessage","message_id","sendDeliveredStatus","failedMessage","console","warn","ids","get","per_page","field","param","value","usersList","createAndUpload","helpers","getBsonObjectId","AuthService","init","appConfig","connectyCubeConfig","autologin","getUserSession","checkUserSessionFromStore","data","JSON","signIn","password","createSession","session","customSession","setUserSession","connect","signup","userSession","localStorage","setItem","CURRENT_USER_SESSION_KEY","stringify","getItem","clear","logout","DEVICE_TOKEN_KEY","authService","Loader","className","Component","Auth","isLogin","isLoader","isAuthorization","handleStateModal","setState","changeName","event","target","changeLogin","changePassword","preventDefault","dataUser","then","catch","error","swal","signUp","endMessage","authText","authLink","style","props","isSmallDevice","backgroundColor","to","src","logo","alt","onSubmit","onChange","required","placeholder","onClick","Avatar","borderRadius","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","colors","randomizeColor","fontSize","words","split","slice","getIconLabel","toUpperCase","UserProfile","customStyles","content","top","left","right","bottom","transform","border","padding","showMoreInformation","isModal","handleCloseModal","logOut","settings","alert","icon","faChevronUp","color","faChevronDown","isOpen","onRequestClose","ariaHideApp","overlayClassName","DialogLayoutUtil","LayoutProvider","dim","ChatLayoutUtil","maxWidth","GetMaxWidthMsg","arr","maxWidthMsg","currentSender","otherSender","ctx","document","createElement","getContext","font","txt","calcWidth","measureText","lines","ceil","maxScrollWidth","getTime","dateSent","hours","getHours","minutes","getMinutes","scrollWidth","scrollHeight","listenerWindowSize","timer","allDialog","handleResize","getElementById","clientWidth","clientHeight","setTimeout","clearTimeout","isAlredy","layoutProvider","getDialogLayoutProvider","changeSearch","includes","search","dataProvider","cloneWithRows","goToChat","item","router","ChatService","setSelectDialog","createNewDialog","_renderDialog","lastDate","lastMessage","updatedDate","monthes","msgLastDate","msgYear","getFullYear","msgMonth","getMonth","msgDate","getDate","msgDay","getDay","msgHours","msgMinutes","LastDate","curYear","curMonth","curDate","curDay","DataProvider","r1","r2","window","addEventListener","fetchDialogsFromServer","prevProps","removeEventListener","faUserPlus","faSearch","position","_data","rowRenderer","SideBar","createImage","Promise","reject","Image","setAttribute","getRadianAngle","degreeValue","PI","getCroppedImg","imageSrc","pixelCrop","rotation","canvas","maxSize","max","safeArea","sqrt","translate","rotate","drawImage","getImageData","putImageData","x","y","toBlob","newFile","File","imageInfo","public","link","boxShadow","ImagePicker","croppedAreaPixels","cropedImage","onCropChange","crop","onCropComplete","croppedArea","cropImage","getImage","onZoomChange","zoom","handleOpenModal","onImageChange","files","_renderAvatarPicker","htmlFor","faCamera","_renderAttachmentPicker","faPaperclip","pickAsAttachment","cropSize","ChatInput","changeMessage","sendMessage","sendMessageCallback","faPaperPlane","PureComponent","getUsers","idsForFetch","usersFromServer","newUsers","usersIdsToIgnore","allUsers","contacts","MessageSendState","faClock","faCheck","faCheckDouble","selectedImg","_renderAsStr","whoIsSender","wordWrap","renderZoomImg","_renderAsAttachment","cursor","participantInfo","notRenderAvatar","widthScroll","withMsg","faTimesCircle","Chat","isFetchingMsg","messagesListRef","listenerLazyLoad","needToGetMoreMessage","recycler_Y","contentHeight","contentNewOffset","lazyLoadMessages","nativeEvent","contentSize","getDialogInfo","getDialogById","UsersService","getOccupants","getMessages","getChatLayoutProvider","currentUserInfo","updateScrollPosition","getElement","children","fullScrollHeight","newOffset","scrollToOffset","goToSplashPage","_renderMessage","scrollToIndex","prewProps","log","currentDialog","innerWidth","faChevronLeft","ref","onScroll","SplashPage","createDialogHeader","isSelectedUser","selectUsers","selectedUsers","dialogType","toggleUserSelect","faCheckCircle","faDotCircle","faArrowRight","CreateDialog","listUsers","userNotFound","isGroupDetails","isUpdate","createDialog","str","dialogName","createPublicDialog","sendChatAlertOnCreate","searchUsers","keyword","listUsersByFullName","changeTypeDialog","createPrivateDialog","_renderUser","isSelected","key","changeDialogName","_renderSelectedUsers","renderHeader","calHeight","faUsers","faUser","Home","changeRouter","routerUrl","routName","match","replace","windowWidth","setUpListeners","Row","Col","sm","md","lg","xl","exact","path","component","Main","initUser","routLink","Boolean","location","hostname","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"ihBAAA,SAASA,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,WAAa,MAAO,IAC/CL,EAAoBM,QAAUN,EAC9BO,EAAOC,QAAUR,EACjBA,EAAoBS,GAAK,K,qfCNlB,SAASC,EAAoBC,GAClC,OAAKA,EAGEC,IAAaC,QAAQC,WAAWH,GAF9B,K,ICFUI,E,WACnB,WAAYC,GAAS,oBACnBC,KAAKR,GAAKO,EAAOE,KAAOF,EAAOP,GAC/BQ,KAAKE,KAAOH,EAAOG,KACnBF,KAAKG,cAAgBJ,EAAOI,cAC5BH,KAAKI,UAA4B,IAAhBL,EAAOG,KAAa,OAASH,EAAOG,KAAO,YAAc,GAC1EF,KAAKK,KAAON,EAAOM,KACnBL,KAAKM,MAAQR,EAAOS,aAAaR,EAAOO,OACxCN,KAAKQ,YAAcT,EAAOS,YAC1BR,KAAKS,YAAcV,EAAOI,eAAiBJ,EAAOW,SAClDV,KAAKW,QAAUZ,EAAOY,QACtBX,KAAKY,WAAab,EAAOa,WACzBZ,KAAKa,cAAgBd,EAAOc,cAC5Bb,KAAKc,aAAeC,KAAKC,MAAMjB,EAAOkB,aAAeF,KAAKG,MAC1DlB,KAAKmB,uBAAyBpB,EAAOoB,wBAA0BJ,KAAKC,MAAMjB,EAAOkB,YAAc,KAAQF,KAAKC,MAAMjB,EAAOqB,YAAc,IACvIpB,KAAKqB,aAAetB,EAAOsB,cAAgB,GAC3CrB,KAAKsB,gBAAkBvB,EAAOuB,gBAC9BtB,KAAKuB,qBAAuBxB,EAAOwB,qBACnCvB,KAAKwB,sBAAwBzB,EAAOyB,sBACpCxB,KAAKyB,oBAAsB1B,EAAO0B,oBAClCzB,KAAK0B,oBAAsB3B,EAAO2B,oB,8DAGhBC,GAClB,OAAOlC,EAAoBkC,O,KC1BlBC,EAAgB,gBAChBC,EAAa,aACbC,EAAe,eACfC,EAAgB,gBAChBC,EAAgB,gBAEhBC,EAAe,SAAAC,GAAO,MAAK,CAAEhC,KAAM0B,EAAeM,QAASA,IAC3DC,EAAe,SAAApC,GAAM,MAAK,CAAEG,KAAM6B,EAAehC,WACjDqC,EAAe,SAAArC,GAAM,MAAK,CAAEG,KAAM2B,EAAY9B,OAAQA,IACtDsC,EAAc,SAACC,EAASC,GAAV,MAAqB,CAAErC,KAAM4B,EAAcQ,QAASA,EAASC,MAAOA,ICTlFC,EAAiB,iBACjBC,EAAe,eACfC,EAAsB,sBACtBC,EAAsB,sBACtBC,EAAkB,kBAIlBC,EAAiB,SAACC,EAAUC,EAAOC,GAAlB,MAA2B,CAAE9C,KAAM0C,EAAiBE,WAAUC,QAAOC,QACtFC,EAAc,SAACX,EAASQ,GAAV,MAAwB,CAAE5C,KAAMuC,EAAcH,UAASQ,aCTrEI,EAAkB,kBAClBC,EAAqB,qBCDrBC,EAAc,cAIdC,EAAa,SAAAC,GAAK,MAAK,CAAEpD,KAAMkD,EAAaE,U,gBCJ5CC,EAAmB,mBACnBC,EAAqB,qBACrBC,EAAsB,sBAEtBC,EAAiB,SAAAC,GAAW,MAAK,CAAEzD,KAAMqD,EAAkBI,gB,gBCJlExB,EAAe,SAACyB,EAAQ1B,GAC5B,IAAM2B,EAAuB3B,EAAQ4B,KAAI,SAAAC,GACvC,OAAIA,EAAKvE,KAAOoE,EAAO7D,OAAOP,GACrBwE,OAAOC,OAAOF,EAAMH,EAAO7D,QAC3BgE,KAEX,OAAO,YAAIF,IAGPK,EAAoB,SAACN,EAAQO,GACjC,IAAMC,EAASR,EAAOS,QAAQC,UAAUC,OAAOJ,EAASP,EAAOd,WAC/D,OAAO,2BAAK,IAAZ,kBAAiBc,EAAOd,SAAWsB,KAG/BI,EAAe,SAACZ,EAAQ1B,GAAa,IACjCI,EAAmBsB,EAAnBtB,QAASC,EAAUqB,EAAVrB,MAmBXkC,EANO,SAACC,GAAD,IAAQC,EAAR,+DAA6BD,EAAME,MAAK,SAACC,EAAOC,GAC3D,IAAML,EAAS,IAAI1D,KAAoC,IAA/B+D,EAAM3D,wBAAiC,IAAIJ,KAAoC,IAA/B8D,EAAM1D,wBAC9E,OAAOwD,GAAYF,EAASA,KAIfG,CAlBM1C,EAAQ4B,KAAI,SAAAC,GAC/B,GAAIA,EAAKvE,KAAO8C,EAAQyC,UAAW,CACjC,IAAMC,EAAS,CACb3D,aAAciB,EAAQ2C,KACtB9D,uBAAwBmB,EAAQ4C,UAChCpE,aAAcwB,EAAQ4C,UACtB1D,sBAAuBe,EAAQwB,EAAKvC,uBAAyB,EAAIuC,EAAKvC,uBAExE,OAAOwC,OAAOC,OAAOF,EAAMiB,GAC3B,OAAOjB,MAWX,OAAO,YAAIU,IAGPU,EAAuB,SAACvB,EAAQtB,GACpC,GAAoC,IAAhC0B,OAAO5E,KAAKkD,GAAS8C,OACvB,OAAO9C,EAGT,IAAM+C,EAAc/C,EAAQsB,EAAOd,UAAUgB,KAAI,SAACC,EAAMuB,GACtD,GAAIvB,EAAKvE,KAAOoE,EAAOb,MAAO,CAC5B,IAAMwC,EAAgB,eAAQxB,GAE9B,OADAwB,EAAiBC,WAAa5B,EAAOZ,IAAIwC,WAClC,eAAKD,GAEd,OAAOxB,KAKT,OAFY,2BAAQzB,GAAR,kBAAkBsB,EAAOd,SAAWuC,KAK5ChC,EAAa,SAACO,EAAQN,GAC1B,IAAMmC,EAAc,GAIpB,OAHA7B,EAAO8B,SAAQ,SAAA3B,GACb0B,EAAY1B,EAAKvE,IAAMuE,KAElB,2BAAKT,GAAUmC,ICxDlBE,GAAaC,YAAgB,CACjCjC,YCFa,WAAiC,IAAhCA,EAA+B,uDAAjB,KAAMC,EAAW,uCAC7C,OAAQA,EAAO1D,MACb,KAAKqD,EACH,OAAOK,EAAOD,YAEhB,KAAKF,EACH,IAAMgB,EAAST,OAAOC,OAAON,EAAYkC,KAAMjC,EAAOD,aAEtD,OADAA,EAAYkC,KAAOpB,EACZ,eAAKd,GAGd,KAAKH,EACH,OAAO,KAET,QACE,OAAOG,IDZXzB,QEAa,WAA2B,IAA1BA,EAAyB,uDAAf,GAAI0B,EAAW,uCACvC,OAAQA,EAAO1D,MACb,KAAK0B,EACH,OAAOgC,EAAO1B,QAEhB,KAAKH,EACH,IAAM0C,EAAStC,EAAayB,EAAQ1B,GACpC,OAAOuC,EAGT,KAAK5C,EACH,MAAM,CAAE+B,EAAO7D,QAAf,mBAA0BmC,IAE5B,KAAKJ,EACH,IAAM2C,EAASD,EAAaZ,EAAQ1B,GACpC,OAAOuC,EAGT,KAAKzC,EACH,IAAMyC,EAASvC,EAAQ4D,QAAO,SAAA/F,GAAM,OAAIA,EAAOP,KAAOoE,EAAOd,YAC7D,OAAO2B,EAGT,QACE,OAAOvC,IFvBX6D,eGLa,WAA4B,IAA3BhG,EAA0B,uDAAjB,KAAM6D,EAAW,uCACxC,OAAQA,EAAO1D,MACb,KAAKgD,EACH,OAAO,eAAKU,EAAO7D,QAGrB,KAAKoD,EACH,MAAO,GAGT,QACE,OAAOpD,IHLXoE,SIDa,WAA4B,IAA3BA,EAA0B,uDAAf,GAAIP,EAAW,uCACxC,OAAQA,EAAO1D,MACb,KAAKsC,EACH,IAAMwD,EAAWpC,EAAOS,QACxB,OAAO,2BAAKF,GAAZ,kBAAuBP,EAAOd,SAAWkD,EAAS1B,YAGpD,KAAK3B,EACH,IAAM8B,EAASP,EAAkBN,EAAQO,GACzC,OAAOM,EAGT,KAAK7B,EACH,IAAMqD,EAAwBd,EAAqBvB,EAAQO,GAC3D,OAAO8B,EAGT,KAAKxD,EACH,OAAO,2BACF0B,GADL,kBAEGP,EAAOd,SAFV,sBAEyBqB,EAASP,EAAOd,WAAa,IAFtD,CAE0Dc,EAAOtB,YAInE,KAAKI,EACH,OAAO,2BACFyB,GADL,kBAEGP,EAAOd,SAAW,KAIvB,QACE,OAAOqB,IJ9BXb,MKNa,WAAyB,IAAxBA,EAAuB,uDAAf,GAAIM,EAAW,uCACrC,OAAQA,EAAO1D,MACb,KAAKkD,EACH,OAAOC,EAAWO,EAAON,MAAOA,GAGlC,QACE,OAAOA,MLaE4C,GARK,SAACC,EAAOvC,GAI1B,MAHoB,iBAAhBA,EAAO1D,OACTiG,EAAQ,IAEHR,GAAWQ,EAAOvC,IMjBZwC,GAFDC,YAAYH,ICIbI,GACH,SAGJC,GAAiB,CACrB/G,GAAI,GACJyF,KAAM,GACNF,UAAW,GACXG,UAAWsB,KAAKC,MAAM1F,KAAKG,MAAQ,KACnCwF,YAAa,KACbC,UAAW,KACXC,OAAQ,MAGGC,GAAb,WACE,aAAgD,IAApC7D,EAAmC,uDAA7BuD,GAAgB5C,EAAa,2DAC7C3D,KAAKR,GAAKwD,EAAIxD,IAAMwD,EAAI/C,IACxBD,KAAKiF,KAAOjC,EAAIiC,MAAQjC,EAAIV,QAC5BtC,KAAK8G,sBAAwB9D,EAAI8D,uBAAyB,KAC1D9G,KAAK+E,UAAY/B,EAAI+D,gBAAmB/D,EAAIgE,WAAahE,EAAIgE,UAAUjC,UACvE/E,KAAKkF,UAAYlC,EAAIkC,WAAclC,EAAIgE,WAAahE,EAAIgE,UAAU9B,WAAcsB,KAAKC,MAAM1F,KAAKG,MAAQ,KACxGlB,KAAKwF,WAAaqB,EAAQI,aAAajE,EAAKW,GAC5C3D,KAAKkH,WAAaL,EAAQM,cAAcnE,GACxChD,KAAK2G,UAAY3D,EAAI2D,WAAc3D,EAAIgE,WAAahE,EAAIgE,UAAUL,UAClE3G,KAAK4G,OAAS5D,EAAI2D,UAVtB,+DAauB3D,GAAM,IAAD,EACxB,GAAIA,EAAI0D,aAAe1D,EAAI0D,YAAYtB,OAAS,EAAG,CACjD,IAAMsB,EAAW,eAAQ1D,EAAI0D,YAAY,IACnCU,EAAY3H,EAAoBuD,EAAI0D,YAAY,GAAGhH,KAEzD,OADAgH,EAAYW,IAAMD,EACX,CAACV,GACH,IAAO,OAAH1D,QAAG,IAAHA,GAAA,UAAAA,EAAKgE,iBAAL,eAAgBN,cAAe1D,EAAIgE,UAAUN,YAAYtB,OAAS,EAAG,CAC9E,IAAMsB,EAAW,eAAQ1D,EAAIgE,UAAUN,YAAY,IAC7CU,EAAY3H,EAAoBuD,EAAIgE,UAAUN,YAAY,GAAGhH,KAEnE,OADAgH,EAAYW,IAAMD,EACX,CAACV,GACH,OAAO,OAxBlB,mCA2BsB1D,EAAKW,GAAc,IAAD,IACpC,cAAIX,QAAJ,IAAIA,GAAJ,UAAIA,EAAKsE,gBAAT,aAAI,EAAeC,MAAK,SAAAtH,GAAG,OAAIA,IAAQ0D,MA5ChB,GA+CvB,OAAIX,QAAJ,IAAIA,GAAJ,UAAIA,EAAKwE,qBAAT,aAAI,EAAoBD,MAAK,SAAAvE,GAAG,OAAIA,EAAIwE,gBAAkB7D,MAhD9B,EAFF,MAmB9B,KAuCa8D,GACX,WAAYzE,GAAM,oBAChBhD,KAAKkH,WAAalE,EAAIgE,UAAUN,YAChC1G,KAAKiF,KAAOjC,EAAIiC,KAChBjF,KAAKkF,UAAYlC,EAAIgE,UAAU9B,UAC/BlF,KAAK+E,UAAY/B,EAAIgE,UAAUjC,UAC/B/E,KAAKR,GAAKwD,EAAIxD,GACdQ,KAAKwF,WAAa,EAClBxF,KAAK4G,YAASc,EACd1H,KAAK2G,UAAY3D,EAAIgE,UAAUL,WCnEdgB,G,WAEnB,WAAY9B,GAAO,oBACjB7F,KAAKR,GAAKqG,EAAKrG,GACfQ,KAAK4H,OAASD,EAAKpH,aAAasF,EAAK+B,QACrC5H,KAAK6H,MAAQhC,EAAKgC,MAClB7H,KAAK8H,YAAcjC,EAAKiC,YAAcjC,EAAKiC,YAAc,GACzD9H,KAAK+H,UAAYlC,EAAKkC,WAAalC,EAAKgC,MACxC7H,KAAKgI,MAAQnC,EAAKmC,MAClBhI,KAAKoB,WAAayE,EAAKzE,WACvBpB,KAAKiB,WAAa4E,EAAK5E,WACvBjB,KAAKiI,gBAAkBpC,EAAKoC,gB,8DAEVtG,GAClB,OAAOlC,EAAoBkC,O,KCVlBuG,GACF,EADEA,GAEJ,ECmYHC,GAAc,I,4DAvSlBC,gB,uCAAkB,WAAOrI,GAAP,2BAAAsI,EAAA,6DACVC,EAAkB,EAAKC,sBAAsBxI,EAAOP,IACpDgJ,EAAkBF,EAAgB,GAClCG,EAAYzE,OAAOC,OAAOlE,EAAQ,CAAE2I,wBAAyBF,EAAgBtD,YAE7EY,EAAS,CACbiB,eAAgBhH,EAAOP,GACvB0F,UAAW,CAAEyD,GAAIH,EAAgBtD,WACjC0D,UAAW,aARG,SAWoBjJ,IAAakJ,KAAKvG,QAAQwG,KAAKhD,GAXnD,cAWViD,EAXU,OAaV5E,EAAW,GACjB4E,EAAsBrE,MAAMgB,SAAQ,SAAA3B,GAC7BA,EAAK+C,uBACR3C,EAAS6E,KAAK,IAAInC,GAAQ9C,EAAM,EAAKJ,YAAYnE,QAIrD4G,GAAM6C,SAAS9G,EAAasG,IACtBS,EAAiB9C,GAAM6C,UflHCnG,EekH0B/C,EAAOP,GflHV,CAAEU,KAAMyC,EAAqBG,WAAUuB,QekHzBF,KArBnD,kBAsBT+E,EAAe7E,QAAQe,QAtBd,kCf7Fa,IAACtC,Ie6Fd,O,2DA+DlBqG,yB,uCAA2B,WAAOpJ,EAAQuC,EAAS8G,GAAxB,qBAAAf,EAAA,sDACnBgB,EAAO7C,KAAKC,MAAM1F,KAAKG,MAAQ,KAC/BoI,EAAevJ,EAAOG,OAASgI,GAAsBnI,EAAOc,cAAc0G,MAAK,SAAAxD,GAAI,OAAIA,GAAQ,EAAKJ,YAAYnE,MAClHO,EAAOI,cACLoJ,EAAoB,CACxBrE,UAAWmE,EACXG,gBAAiB,EACjBzE,UAAWhF,EAAOP,GAClBsH,sBAAuBsC,EACvBzC,UAAW,EAAKhD,YAAYnE,IAExBwD,EAAM,CACV9C,KAAOH,EAAOI,cAAyB,YAAT,OAC9B8E,KAAM3C,EACN0E,UAAWuC,GAEb5J,IAAakJ,KAAKY,KAAKH,EAActG,GAhBZ,2C,+DAoF3B0G,iCAAmC,SAAC3J,GAClC,IAAM0I,EAAYzE,OAAOC,OAAOlE,EAAQ,CAAEyB,sBAAuB,IAEjE,OADA4E,GAAM6C,SAAS9G,EAAasG,KACrB,G,6DA3NP9I,IAAakJ,KAAKc,kBAAoB3J,KAAK2J,kBAAkBC,KAAK5J,MAClEL,IAAakJ,KAAKgB,sBAAwB7J,KAAK8J,sBAAsBF,KAAK5J,MAC1EL,IAAakJ,KAAKkB,0BAA4B/J,KAAKgK,kBAAkBJ,KAAK5J,MAC1EL,IAAakJ,KAAKoB,qBAAuBjK,KAAKkK,aAAaN,KAAK5J,Q,0KAIxB,IAApCoG,GAAM+D,WAAWjI,QAAQkD,O,yCACpBgB,GAAM+D,WAAWjI,S,uBAEMvC,IAAakJ,KAAK9I,OAAO+I,O,UAAnDsB,E,OACAC,EAAgBrK,KAAK2D,YACvB2G,EAAoB,GAElBpI,EAAUkI,EAAkB1F,MAAMZ,KAAI,SAAAC,GAM1C,OALIA,EAAK7D,OAASgI,IAChBnE,EAAKlD,cAAc6E,SAAQ,SAAA3B,GACzBA,IAASsG,EAAc7K,IAAM8K,EAAkBtB,KAAKjF,MAGjD,IAAIjE,EAAOiE,MAGa,IAA7BuG,EAAkBlF,O,kCACIpF,KAAKuK,aAAaD,G,QAApCE,E,OACNpE,GAAM6C,SAAS5F,EAAWmH,I,eAG5BpE,GAAM6C,SAAShH,EAAaC,I,kBACrBkE,GAAM+D,WAAWjI,S,kLAGRnC,G,6FACV0K,EAAiBzK,KAAKuI,sBAAsBxI,EAAOP,IACrD0J,EAAiB,QAGhBnJ,EAAO2K,uBAAyB3K,EAAOyB,sBAAwB,IAAMzB,EAAO2K,uB,iCAC/C/K,IAAakJ,KAAKvG,QAAQwG,KAAK,CAC7D/B,eAAgBhH,EAAOP,GACvBoJ,UAAW,c,OAFP+B,E,OAKAxG,EAAW,GACjBwG,EAAkBjG,MAAMgB,SAAQ,SAAA3B,GACzBA,EAAK+C,uBACR3C,EAAS6E,KAAK,IAAInC,GAAQ9C,EAAM,EAAKJ,YAAYnE,QAI/CwF,EAAShB,OAAOC,OAAOlE,EAAQ,CAAE2K,uBAAuB,IAC9D1K,KAAK0J,iCAAiC1E,GACtCoB,GAAM6C,Uf7EkBnG,Ee6EK/C,EAAOP,Gf7EW,CAAEU,KAAMsC,EAAgBM,WAAUuB,Qe6EzCF,KACxC+E,EAAiB/E,EAASiB,O,6BAGtBrF,EAAOyB,sBAAwB,G,wBAC3B2C,EAAWnE,KAAKuI,sBAAsBxI,EAAOP,IAC7CoL,EAAiBzG,EAASpE,EAAOyB,sBAAwB,GAC/DxB,KAAK6K,gBAAgB9K,EAAOP,I,UACtBQ,KAAK8K,eAAeF,EAAepL,GAAIoL,EAAejE,UAAWiE,EAAe7F,W,QACtF/E,KAAK0J,iCAAiC3J,G,QAExCmJ,EAAiBuB,EAAerF,O,iCAE3B8D,G,kCf1FkB,IAACpG,I,8IewHV/C,EAAQgL,G,sGAAarE,E,gCAAqBsE,E,uBACpDnF,EAAO7F,KAAK2D,YACZsH,EAAOF,EAAYG,OACnB7B,EAAO7C,KAAKC,MAAM1F,KAAKG,MAAQ,KAC/BoI,EAAevJ,EAAOG,OAASgI,GAAsBnI,EAAOc,cAAc0G,MAAK,SAAAxD,GAAI,OAAIA,GAAQ8B,EAAKrG,MACtGO,EAAOI,eAEP6C,EAAM,CACR9C,KAAMH,EAAOK,UACb6E,KAAMgG,EACNjE,UAAW,CACTwC,gBAAiB,EACjBzE,UAAWhF,EAAOP,GAClBmH,UAAWd,EAAKrG,GAChB0F,UAAWmE,KAKX7J,GAAKQ,KAAKmL,iBAGVzE,E,0CACK1G,KAAKoL,wBAAwBrL,EAAQuJ,EAActG,EAAK0D,EAAasE,I,eAGxE1I,EAAU,IAAImF,GAAYzE,GAE1BqI,EAAcrH,OAAOsH,OAAOhJ,G,UAE5B8D,GAAM6C,SAAShG,EAAYoI,EAAatL,EAAOP,K,QACrDwL,IACArL,IAAakJ,KAAKY,KAAKH,EAActG,GACrCoD,GAAM6C,SAAS5G,EAAYgJ,I,sJAuBPtL,GAEpBC,KAAKmJ,yBAAyBpJ,EADd,mBAC+BuG,M,uFAGnBvG,EAAQuJ,EAActG,EAAK0D,EAAasE,G,oFAE9D3D,EAAMkE,IAAIC,gBAAgB9E,EAAY+E,MAC5CzI,EAAIgE,UAAUN,YAAc,CAAC,CAAEW,QAC/BrE,EAAIiC,KAAO,mBACL3C,EAAU,IAAImF,GAAYzE,G,SAC1BoD,GAAM6C,SAAShG,EAAYX,EAASvC,EAAOP,K,cACjDwL,I,SAGuBhL,KAAK0L,YAAYhF,G,cAAlCiF,E,OACAC,ElB3LD,CACLC,MAFkCJ,EkB4LSE,GlB1LhCE,KACXnM,IAAK+L,EAAK/L,IACVQ,KAAMuL,EAAKK,aACXzL,KAAMoL,EAAKpL,KACX0L,MAAO,IACPC,OAAQ,KkBsLRhJ,EAAIgE,UAAUN,YAAc,CAACkF,G,UACvBjM,IAAakJ,KAAKY,KAAKH,EAActG,G,eAC3CoD,GAAM6C,SAAS5G,EAAYC,I,qDlB/LxB,IAA+BmJ,I,8JkBmMVQ,G,oFAClB/J,EAAUkE,GAAM+D,WAAWjI,QAC7BnC,EAAS,KAEbmC,EAAQwD,SAAQ,SAAA3B,GACVA,EAAK7D,OAASgI,IAAuBnE,EAAKlD,cAAc0G,MAAK,SAAAxD,GAAI,OAAIA,IAASkI,OAChFlM,EAASgE,MAIRhE,E,wBACGmM,EAAS,CACbhM,KAAMgI,GACNrH,cAAeoL,G,SAGMtM,IAAakJ,KAAK9I,OAAOoM,OAAOD,G,UAAjDP,E,OACN5L,EAAS,IAAID,EAAO6L,IAChB3L,KAAKoM,qBAAqBH,G,wBAC5B7F,GAAM6C,SAAS7G,EAAarC,I,kBACrBA,G,yBAEiBC,KAAKqM,sBAAsBJ,G,eAA7CzB,E,QACI3E,KAAO,IAAIyG,GAAU9B,EAAU3E,MACzCO,GAAM6C,SAAS5F,EAAW,CAACmH,EAAU3E,QACrCO,GAAM6C,SAAS7G,EAAarC,I,kBACrBA,G,YAKPC,KAAKoM,qBAAqBH,G,0CACrBlM,G,yBAEiBC,KAAKqM,sBAAsBJ,G,eAA7CzB,E,QACI3E,KAAO,IAAIyG,GAAU9B,EAAU3E,MACzCO,GAAM6C,SAAS5F,EAAW,CAACmH,EAAU3E,Q,kBAC9B9F,G,0LAWcc,EAAe0L,EAAWC,G,kFAC3C7I,EAAc3D,KAAK2D,YACzB9C,EAAc4L,QAAQ9I,EAAYnE,IAC5B0M,EAAS,CACbhM,KAAMgI,GACNrH,gBACAR,KAAMkM,IAEMC,E,gCAAYxM,KAAK0L,YAAYc,G,+CAAO,K,eAA5CE,E,QAEJR,EAAO5L,MAAQoM,EAAMhN,K,UAEFC,IAAakJ,KAAK9I,OAAOoM,OAAOD,G,eAA/CnM,E,OACA4M,EAAY,IAAI7M,EAAOC,GAC7BqG,GAAM6C,SAAS7G,EAAauK,I,kBACrBA,G,2LAGa7J,G,0FACbnD,IAAakJ,KAAKvG,QAAQsK,OAAO,KAAM,CAC5C7F,eAAgBjE,EAChB+J,KAAM,K,6KAIQC,EAAWhK,G,wEAC3B9C,KAAKkK,aAAa4C,EAAWhK,G,kBACtBnD,IAAakJ,KAAKvG,QAAQsK,OAAO,KAAM,CAC5C7F,eAAgBjE,EAChB+J,KAAM,K,0LAIcE,EAAU/J,G,oFAC1BV,EAAU,IAAIuE,GAAQ7D,GACtB6C,EAAO7F,KAAK2D,YACZ5D,E,UAASC,KAAKgN,2B,aAAL,EAA0BxN,IAGrCwD,EAAIgE,UAAUF,sB,iCACgBnH,IAAakJ,KAAK9I,OAAO+I,O,cAAnDsB,E,OACAlI,EAAUkI,EAAkB1F,MAAMZ,KAAI,SAAAC,GAC1C,OAAO,IAAIjE,EAAOiE,MAEpBqC,GAAM6C,SAAShH,EAAaC,I,2BAI1B6K,IAAalH,EAAKrG,KAChBO,IAAWuC,EAAQyC,WACrBqB,GAAM6C,SAAS5G,EAAYC,IAC3BtC,KAAKiN,YAAY3K,EAAQ9C,GAAI8C,EAAQyC,WACrC/E,KAAK8K,eAAe9H,EAAIgE,UAAUkG,WAAYlK,EAAIgE,UAAUL,UAAW3D,EAAI+B,aAE3E/E,KAAKmN,oBAAoBnK,EAAIgE,UAAUkG,WAAYlK,EAAIgE,UAAUL,UAAW3D,EAAI+B,WAChFqB,GAAM6C,SAAS5G,EAAYC,GAAS,KAEtC8D,GAAM6C,SAAShG,EAAYX,EAASA,EAAQyC,a,sJAK1BqI,EAAepK,GACnCqK,QAAQC,KAAK,yBACTF,GAAiBpK,EAAIgE,UAAUF,uBAGnCV,GAAM6C,SAASpG,EAAeG,EAAIgE,UAAUjC,UAAW/B,EAAIxD,GAAI,CAAEgG,WH7T1C,O,wCGgUPsH,EAAWhK,EAAUmJ,GACrCoB,QAAQC,KAAK,oBAAqBR,GAClC1G,GAAM6C,SAASpG,EAAeC,EAAUgK,EAAW,CAAEtH,WHjUzB,O,mCGoUjBsH,EAAWhK,EAAUmJ,GAChCoB,QAAQC,KAAK,eAAgBR,GAC7B1G,GAAM6C,SAASpG,EAAeC,EAAUgK,EAAW,CAAEtH,WHrU9B,O,qCG0UVsH,EAAWb,EAAQnJ,GAChCnD,IAAakJ,KAAKiC,eAAe,CAAEgC,YAAWb,SAAQnJ,e,0CAGpCgK,EAAWb,EAAQnJ,GACrCnD,IAAakJ,KAAKsE,oBAAoB,CAAEL,YAAWb,SAAQnJ,e,4EAG1CyK,G,uFACO5N,IAAa2D,MAAMkK,IAAI,CAC7CC,SAAU,IACV3H,OAAQ,CACN4H,MAAO,KAAMC,MAAO,KAAMC,MAAOL,K,cAH/BM,E,yBAOCA,EAAUnJ,MAAMZ,KAAI,SAAAC,GACzB,OAAO,IAAIuI,GAAUvI,EAAK8B,U,uLAIFrG,G,0FACnBG,IAAa2D,MAAMkK,IAAIhO,I,wIAGhBO,GACdqG,GAAM6C,SdtWoB,SAAAlJ,GAAM,MAAK,CAAEG,KAAMgD,EAAiBnD,UcsW/CgG,CAAehG,M,0CAI9B,OAAOqG,GAAM+D,WAAWpE,iB,oCAGZjD,GACZ,OAAOsD,GAAM+D,WAAWjI,QAAQqF,MAAK,SAAAxD,GAAI,OAAIA,EAAKvE,KAAOsD,O,4CAGrCA,GAEpB,OADesD,GAAM+D,WAAWhG,SAClBrB,K,2EAGE2I,G,0FACT9L,IAAaC,QAAQkO,gBAAgBrC,I,6IAOzBjM,GACnB,OAAO4G,GAAM+D,WAAW7G,MAAM9D,K,kCAJ9B,OAAO4G,GAAM+D,WAAWxG,YAAYkC,O,sCAQpC,OAAOlG,IAAakJ,KAAKkF,QAAQC,sB,MAOrChK,OAAOsH,OAAOnD,IAECA,U,mBCvYT8F,G,yNAKItO,IAAauO,KAAb,MAAAvO,IAAY,YAASwO,GAAUC,qB,gCAC9BpO,KAAKqO,a,0QAI4BrO,KAAKsO,iB,YAAvCC,E,gCAEEC,EAAOC,KAAKzN,MAAMuN,G,SAClBvO,KAAK0O,OAAO,CAAE7G,MAAO2G,EAAK3G,MAAO8G,SAAUH,EAAKG,W,gCAC/C,Q,iCACO,Q,6KAGLzC,G,2FACWvM,IAAaiP,cAAc1C,G,OAA3C2C,E,OACAlL,EAAc,IAAIgE,GAAKkH,EAAQhJ,MACrCgJ,EAAQhJ,KAAK+B,OAASnI,EAAoBoP,EAAQhJ,KAAK+B,QAEvDiH,EAAQhJ,KAAKkC,UAAY8G,EAAQhJ,KAAKgC,MACtCzB,GAAM6C,SAASvF,EAAemL,IACxBC,EAAgB9K,OAAOC,OAAO,GAAIN,EAAa,CAAEgL,SAAUzC,EAAOyC,WACxE3O,KAAK+O,eAAeD,GACpB9O,KAAKgP,QAAQF,EAActP,GAAIsP,EAAcH,U,8KAGlCzC,G,iFACLvM,IAAaiP,gB,uBACbjP,IAAa2D,MAAM2L,OAAO/C,G,gCACzBlM,KAAK0O,OAAOxC,I,8KAGPD,EAAQ0C,G,iFACdhP,IAAakJ,KAAKmG,QAAQ,CAAE/C,SAAQ0C,a,yIAG7BO,GACb,OAAOC,aAAaC,QAAQnB,EAAYoB,yBAA0BZ,KAAKa,UAAUJ,M,uCAIjF,OAAOC,aAAaI,QAAQtB,EAAYoB,4B,gJAIxCF,aAAaK,Q,SACP7P,IAAa8P,S,OACnBrJ,GAAM6C,SX3CmB,CAAE/I,KAAM,iB,wGWR/B+N,GACGoB,yBAA2B,2BAD9BpB,GAEGyB,iBAAmB,mBAuD5B,IAAMC,GAAc,IAAI1B,GAExBjK,OAAOsH,OAAOqE,IAECA,UCrEA,OAA0B,2C,oBCGpBC,I,qLAEjB,OACE,yBAAKC,UAAU,oBACb,yBAAKA,UAAU,gB,GAJaC,cCMfC,G,4MACnB5J,MAAQ,CACN6J,SAAS,EACTC,UAAU,EACVlI,UAAW,GACXF,MAAO,GACP8G,SAAU,GACVuB,iBAAiB,G,EAGnBC,iBAAmB,WACjB,OAAO,EAAKC,SACV,CAAEJ,SAAU,EAAK7J,MAAM6J,W,EAI3BK,WAAa,SAACC,GAAD,OAAY,EAAKF,SAAS,CAAErI,UAAWuI,EAAMC,OAAO3C,S,EAEjE4C,YAAc,SAACF,GAAD,OAAY,EAAKF,SAAS,CAAEvI,MAAOyI,EAAMC,OAAO3C,S,EAE9D6C,eAAiB,SAACH,GAAD,OAAY,EAAKF,SAAS,CAAEzB,SAAU2B,EAAMC,OAAO3C,S,EAEpE/F,MAAQ,SAAC5I,GACPA,EAAEyR,iBADW,MAEmC,EAAKvK,MAA7C0B,EAFK,EAELA,MAAO8G,EAFF,EAEEA,SAAU5G,EAFZ,EAEYA,UAAWiI,EAFvB,EAEuBA,QAC9BW,EAAW,CAAE9I,QAAO8G,YAE1B,GAAK9G,EAAMqD,QAAWyD,EAASzD,SAAW8E,GAAYjI,EAAUmD,QAMhE,EAAKkF,SAAS,CAAEH,UAAU,IAEtBD,EACF/B,GAAYS,OAAOiC,GAChBC,MAAK,WACJ,EAAKR,SAAS,CAAEH,UAAU,EAAOC,iBAAiB,OAEnDW,OAAM,SAAAC,GACL,EAAKV,SAAS,CAAEH,UAAU,IAC1Bc,KAAK,aAAD,OAActC,KAAKa,UAAUwB,IAAU,GAAI,aAGnDH,EAAS5I,UAAYA,EACrBkG,GAAY+C,OAAOL,GAChBC,MAAK,WACJ,EAAKR,SAAS,CAAEH,UAAU,EAAOC,iBAAiB,IAClDa,KAAK,mCAAoC,GAAI,cAE9CF,OAAM,SAAAC,GACL,EAAKV,SAAS,CAAEH,UAAU,IAC1Bc,KAAK,aAAD,OAActC,KAAKa,UAAUwB,IAAU,GAAI,iBA1BrD,CACE,IAAMG,EAAajB,EAAU,SAAW,UACxCe,KAAK,UAAD,6BAAkCE,M,uDA+BhC,IAAD,EACoEjR,KAAKmG,MAAxE6J,EADD,EACCA,QAASnI,EADV,EACUA,MAAO8G,EADjB,EACiBA,SAAUsB,EAD3B,EAC2BA,SAAUC,EADrC,EACqCA,gBAAiBnI,EADtD,EACsDA,UACvDmJ,EAAWlB,EAAU,yBAA2B,2BAChDmB,EAAWnB,EAAU,UAAY,UAEvC,OACE,yBAAKH,UAAU,2BAAsBuB,MAAOpR,KAAKqR,MAAMC,eAAiB,CAAEC,gBAAiB,YACzF,yBAAK1B,UAAU,uBAAuBuB,MAAOpB,EAAU,CAAEhE,OAAQ,SAAY,CAAEA,OAAQ,UACpFiE,GACC,yBAAKJ,UAAU,qBACb,kBAAC,GAAD,OAGHK,GACC,kBAAC,IAAD,CAAUsB,GAAG,UAEf,yBAAK3B,UAAU,aACb,yBAAK4B,IAAKC,GAAMC,IAAI,UAEtB,0BAAMC,SAAU5R,KAAK6H,MAAOgI,UAAU,2BAClCG,GACA,2BACE9P,KAAK,OACL0N,MAAO7F,EACP8J,SAAU7R,KAAKqQ,WACfyB,UAAQ,EACRC,YAAY,OACZ1R,KAAK,SAGT,2BACEH,KAAK,OACL0N,MAAO/F,EACPgK,SAAU7R,KAAKwQ,YACfsB,UAAQ,EACRC,YAAY,QACZ1R,KAAK,UACP,2BACEH,KAAK,WACL0N,MAAOe,EACPkD,SAAU7R,KAAKyQ,eACfqB,UAAQ,EACRC,YAAY,WACZ1R,KAAK,aACP,4BAAQH,KAAK,SAAS0N,MAAM,UAAUoC,EAAU,SAAW,YAE7D,yBAAKH,UAAU,eACb,8BAAOqB,GAEP,uBAAGc,QAAShS,KAAKmQ,kBAAmBgB,U,GA7GdrB,a,yECNnB,SAASmC,GAAT,GAAwC,IAAtB3R,EAAqB,EAArBA,MAAOD,EAAc,EAAdA,KAAMwL,EAAQ,EAARA,KAyB5C,OACEvL,EACE,yBAAK8Q,MAAO,CAAErF,MAAOF,EAAMG,OAAQH,IACjC,yBAAKuF,MAAO,CACVrF,MAAOF,GAAQ,OACfG,OAAQH,GAAQ,OAChBqG,aAAc,MACdC,gBAAgB,OAAD,OAAS7R,EAAT,KACf8R,mBAAoB,SACpBC,eAAgB,QAChBC,iBAAkB,gBAItB,yBAAKlB,MAAO,CAAErF,MAAOF,EAAMG,OAAQH,IACjC,yBAAKgE,UAAU,iBAAiBuB,MAAO,CAAEG,gBAvC/C,WACE,IAAMgB,EAAS,CACb,OACA,cACA,UACA,OACA,QACA,YACA,OACA,SACA,MACA,WAGF,OAAOA,EAAOlS,EAAK+E,OAASmN,EAAOnN,QAyB2BoN,KACxD,uBAAGpB,MAAO,CAAEqB,SAAU5G,EAAO,MAvBrC,WACE,IAAM6G,EAAQrS,EAAKsS,MAAM,KACzB,OAAOD,EAAMtN,OAAS,EAAf,UACAsN,EAAM,GAAGE,MAAM,EAAG,IADlB,OACuBF,EAAM,GAAGE,MAAM,EAAG,IAC5CvS,EAAKuS,MAAM,EAAG,GAmByBC,GAAeC,iB,IChCxDC,G,kDACJ,WAAY1B,GAAQ,IAAD,8BACjB,cAAMA,IAMR2B,aAAe,CACbC,QAAS,CACPC,IAAK,MACLC,KAAM,MACNC,MAAO,OACPC,OAAQ,OACRC,UAAW,wBACXC,OAAQ,OACRC,QAAS,IAfM,EAmBnBC,oBAAsB,WACpB,EAAKrD,SAAS,CAAEsD,SAAU,EAAKvN,MAAMuN,WApBpB,EAuBnBC,iBAAmB,kBAAO,EAAKvD,SAAS,CAAEsD,SAAS,KAvBhC,EAyBnBE,OAAS,WACP3F,GAAYwB,UA1BK,EA6BnBoE,SAAW,WACTC,MAAM,eACN,EAAKH,oBA7BL,EAAKxN,MAAQ,CACXuN,SAAS,GAHM,E,qDAkCT,IACAA,EAAY1T,KAAKmG,MAAjBuN,QACA/P,EAAgB3D,KAAKqR,MAArB1N,YACR,IAAKA,EACH,OAAO,qCAJF,IAOCkC,EAASlC,EAATkC,KACR,OACE,yBAAKgK,UAAU,yBACb,yBAAKA,UAAU,wBACb,yBAAKA,UAAU,0BACb,yBAAKA,UAAU,UACb,kBAACoC,GAAD,CAAQ3R,MAAOuF,EAAK+B,OAAQvH,KAAMwF,EAAKkC,UAAW8D,KAAM,MAE1D,8BAAOhG,EAAKkC,YAEd,yBAAK8H,UAAU,oBAAoBrQ,GAAG,oBAAoBwS,QAAShS,KAAKyT,qBACrEC,EACC,kBAAC,KAAD,CAAiBK,KAAMC,KAAaC,MAAO,UAC3C,kBAAC,KAAD,CAAiBF,KAAMG,KAAeD,MAAO,cAIlDP,GACC,oCACE,kBAAC,KAAD,CACES,OAAQT,EACRU,eAAgBpU,KAAK2T,iBACrBU,aAAa,EACbjD,MAAOpR,KAAKgT,aACZsB,iBAAiB,yBAEnB,yBAAKzE,UAAU,sBACb,4BACE,wBAAIA,UAAU,+BACZ,kBAAC,IAAD,CACE2B,GAAG,QACHQ,QAAShS,KAAK4T,OACd/D,UAAU,sBAHZ,WAKF,wBAAIA,UAAU,+BACZ,kBAAC,IAAD,CACE2B,GAAG,QACHQ,QAAShS,KAAK6T,SACdhE,UAAU,sBAHZ,qB,GA7EQC,aAgGXd,gBAJS,SAAC,GAAD,MAAsB,CAC5CrL,YADsB,EAAGA,eAIZqL,CAAyB+D,I,SCzG3BwB,GAAb,qHACiCxI,GAC7B,OAAO,IAAIyI,mBACT,WACE,MAAO,UAET,SAACtU,EAAMuU,GACLA,EAAI1I,MAAQA,EACZ0I,EAAIzI,OAAS,UARrB,KAea0I,GAAb,mHAC+BrD,GAAQ,IAC3BtF,EAAmCsF,EAAnCtF,MAAOjJ,EAA4BuO,EAA5BvO,SAAUuH,EAAkBgH,EAAlBhH,cAKnBsK,EAAW,IAAIC,GAAe7I,GAGpC,OAAO,IAAIyI,mBACT,SAACK,GACC,OAAOA,KAET,SAAC3U,EAAMuU,EAAKnP,GACV,GAAIc,GAAM+D,WAAWhG,SAASrB,GAAUwC,GAAO4B,WAI7C,OAFAuN,EAAI1I,MAAQA,OACZ0I,EAAIzI,OAAS,KAIb,IAAI8I,EAEFA,EADE1O,GAAM+D,WAAWhG,SAASrB,GAAUwC,GAAOqB,YAAc0D,EAC7CsK,EAASI,cAETJ,EAASK,YAGzB,IACIC,EADWC,SAASC,cAAc,UACnBC,WAAW,MAC9BH,EAAII,KAAJ,UA5BW,GA4BX,8BACA,IAAIC,EAAMlP,GAAM+D,WAAWhG,SAASrB,GAAUwC,GAAOL,KAE/CsQ,EAAYN,EAAIO,YAAYF,GAAKvJ,MACjC0J,EAAQjP,KAAKkP,KAAKH,GAAaT,EA9B7B,KAgCRL,EAAI1I,MAAQA,EACZ0I,EAAIzI,OAlCS,IAkCAyJ,EAnCF,GAGF,GAEF,UARjB,KA6Cab,GACX,WAAYe,GAAiB,oBACvBA,EAAiB,MACnB3V,KAAK+U,cAAgB,IACrB/U,KAAKgV,YAAc,KAEjBW,EAAiB,KAAOA,EAAiB,MAC3C3V,KAAK+U,cAAgB,IACrB/U,KAAKgV,YAAc,KAEjBW,EAAiB,KAAOA,EAAiB,MAC3C3V,KAAK+U,cAAgB,IACrB/U,KAAKgV,YAAc,KAEjBW,EAAiB,MACnB3V,KAAK+U,cAAgB,IACrB/U,KAAKgV,YAAc,MClDlB,SAASY,GAAQC,GACtB,IAAMxM,EAAOwM,EAAW,IAAI9U,KAAgB,IAAX8U,GAAmB,IAAI9U,KAClD+U,EAAQzM,EAAK0M,WACbC,EAAU3M,EAAK4M,aACrB,MAAM,GAAN,OAAWH,EAAQ,EAAKA,EAAS,IAAMA,EAAvC,YAAkDE,EAAU,EAAKA,EAAW,IAAMA,G,WCnB9ElW,G,kDAOJ,WAAYuR,GAAQ,IAAD,8BACjB,cAAMA,IAPR6E,YAAc,EAMK,EALnBC,aAAe,EAKI,EAJnBC,mBAAqB,KAIF,EAHnBC,MAAQ,KAGW,EAFnBC,UAAY,GAEO,EA8CnBC,aAAe,WACb,EAAKL,YAAchB,SAASsB,eAAe,yBAAyBC,YACpE,EAAKN,aAAejB,SAASsB,eAAe,yBAAyBE,aAChE,EAAKL,QACR,EAAKA,MAAQM,YAAW,WACtBC,aAAa,EAAKP,OAClB,EAAKA,MAAQ,KACb,EAAKjG,SAAS,CACZyG,UAAU,EACVC,eAAgBvC,GAAiBwC,wBAAwB,EAAKb,iBAE/D,OAzDY,EA6DnBc,aAAe,SAAC1G,GACd,IAAIpO,EAAU,GACa,KAAvBoO,EAAMC,OAAO3C,MACf1L,EAAU,EAAKoU,UAEf,EAAKA,UAAU5Q,SAAQ,SAAA3B,GACTA,EAAK1D,KAAKyS,cAAcmE,SAAS3G,EAAMC,OAAO3C,MAAMkF,gBACzD5Q,EAAQ8G,KAAKjF,MAGxB,EAAKqM,SAAS,CACZ8G,OAAQ5G,EAAMC,OAAO3C,MACrBuJ,aAAc,EAAKhR,MAAMgR,aAAaC,cAAclV,MAzErC,EA6EnBmV,SAAW,SAACC,GAAU,IACZC,EAAW,EAAKlG,MAAhBkG,OACRC,GAAYC,gBAAgBH,GAC5BC,EAAO,eAhFU,EAmFnBG,gBAAkB,YAEhBH,EADmB,EAAKlG,MAAhBkG,QACD,wBArFU,EAwFnBI,cAAgB,SAACzX,EAAMoX,GACrB,OACE,wBAAItF,QAAS,kBAAM,EAAKqF,SAASC,KAC/B,yBAAKzH,UAAU,sBACb,kBAACoC,GAAD,CAAQ3R,MAAOgX,EAAKhX,MAAOD,KAAMiX,EAAKjX,KAAMwL,KAAM,MAEpD,yBAAKgE,UAAU,qBACb,yBAAKA,UAAU,0BACb,4BAAKyH,EAAKjX,MACV,8BAA6B,KAAtBiX,EAAKjW,aAAsB,kBAAoBiW,EAAKjW,eAE7D,yBAAKwO,UAAU,2BACb,2BDzHG,YAA2D,IAAvC+H,EAAsC,EAAtCA,SAAUC,EAA4B,EAA5BA,YAAaC,EAAe,EAAfA,YAClDC,EAAU,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAExFC,EAAcH,EAAc,IAAI9W,KAAgB,IAAX6W,GAAmB,IAAI7W,KAAK+W,GACjEG,EAAUD,EAAYE,cACtBC,EAAWH,EAAYI,WACvBC,EAAUL,EAAYM,UACtBC,EAASP,EAAYQ,SACrBC,EAAWT,EAAYjC,WACvB2C,EAAaV,EAAY/B,aACzB0C,EAAW,IAAI5X,KACf6X,EAAUD,EAAST,cACnBW,EAAWF,EAASP,WACpBU,EAAUH,EAASL,UACnBS,EAASJ,EAASH,SAExB,OAAII,EAAUX,EACN,GAAN,OAAUF,EAAQI,GAAlB,YAA+BE,EAA/B,aAA2CJ,GAClCY,EAAWV,GAEXW,EAAWT,EAAU,EADxB,GAAN,OAAUN,EAAQI,GAAlB,YAA+BE,GAGtBU,EAASR,EACZ,GAAN,OArBW,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAqBvCA,IAET,GAAN,OAAWE,EAAW,EAAKA,EAAY,IAAMA,EAA7C,YAA2DC,EAAa,EAAKA,EAAc,IAAMA,GCgGrFd,CAAS,CACXA,SAAUN,EAAKnW,uBACf0W,YAAaP,EAAKjW,aAClByW,YAAaR,EAAKxW,gBAEnBwW,EAAK9V,sBAAwB,GAC5B,8BAAO8V,EAAK9V,2BAxGtB,EAAK2E,MAAQ,CACX0Q,UAAU,EACVM,aAAc,IAAI6B,iBAAa,SAACC,EAAIC,GAClC,OAAOD,IAAOC,GAAMD,EAAGzX,wBAA0B0X,EAAG1X,yBAEtDsV,eAAgB,EAChBvU,MAAO,GACP0N,UAAU,EACViH,OAAQ,IAVO,E,gEAcE,IAAD,OAClBiC,OAAOC,iBAAiB,SAAUpZ,KAAKuW,cACvCvW,KAAKkW,YAAchB,SAASsB,eAAe,yBAAyBC,YACpEzW,KAAKmW,aAAejB,SAASsB,eAAe,yBAAyBE,aAErEc,GAAY6B,yBAAyBzI,MAAK,SAAC1O,GACzC,EAAKoU,UAAYpU,EACjB,EAAKkO,SAAS,CACZyG,UAAU,EACV5G,UAAU,EACV6G,eAAgBvC,GAAiBwC,wBAAwB,EAAKb,aAC9DiB,aAAc,EAAKhR,MAAMgR,aAAaC,cAAclV,U,yCAKvCoX,GAAY,IACrBpX,EAAYlC,KAAKqR,MAAjBnP,QACJlC,KAAKqR,MAAMnP,UAAYoX,EAAUpX,UAEnClC,KAAKsW,UAAYpU,EACjBlC,KAAKoQ,SAAS,CACZ0G,eAAgBvC,GAAiBwC,wBAAwB/W,KAAKkW,aAC9DiB,aAAcnX,KAAKmG,MAAMgR,aAAaC,cAAclV,Q,6CAMxDiX,OAAOI,oBAAoB,SAAUvZ,KAAKuW,gB,+BAuElC,IAAD,EACoDvW,KAAKmG,MAAxD8J,EADD,EACCA,SAAUkH,EADX,EACWA,aAAcL,EADzB,EACyBA,eAAgBI,EADzC,EACyCA,OAChD,OACE,yBAAKrH,UAAU,oBACb,4BAAQmC,QAAShS,KAAK0X,iBACpB,kBAAC,KAAD,CAAiB3D,KAAMyF,KAAYvF,MAAO,YAC1C,2CAEF,yBAAKpE,UAAU,uBACb,yBAAKA,UAAU,4BACb,kBAAC,KAAD,CAAiBkE,KAAM0F,KAAUxF,MAAO,aAE1C,2BACEpE,UAAU,cACV3P,KAAK,OACL0N,MAAOsJ,EACPrF,SAAU7R,KAAKgX,aACflF,UAAQ,EACRC,YAAY,kBACZ1R,KAAK,YAET,yBAAKwP,UAAU,wBAAwBrQ,GAAG,yBACvCyQ,EAEG,yBAAKmB,MAAO,CAAEsI,SAAU,WAAY3N,MAAO,OAAQC,OAAQ,SACzD,kBAAC,GAAD,OAEwB,IAAxBmL,EAAa/R,OACf,yBAAKyK,UAAU,mBACb,6CACO7P,KAAKmG,MAAM0Q,SAClBM,EAAawC,MAAMvU,OAAS,EAC1B,4BAEI,kBAAC,oBAAD,CACEgM,MAAO,CAAErF,MAAO/L,KAAKkW,YAAalK,OAAQhM,KAAKmW,cAC/CgB,aAAcA,EACdL,eAAgBA,EAChB8C,YAAa5Z,KAAK2X,iBAGhB,yBAAK9H,UAAU,mBACrB,2CACO,W,GApKNC,aAgLNd,gBAJS,SAAC,GAAD,MAAkB,CACxC9M,QADsB,EAAGA,WAIZ8M,CAAyBlP,ICzLnB+Z,I,8KACT,IACAtC,EAAWvX,KAAKqR,MAAhBkG,OACR,OACE,yBAAK1H,UAAU,qBACb,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAS0H,OAAQA,S,GANYzH,c,UCL/BgK,GAAc,SAAAzS,GAAG,OACrB,IAAI0S,SAAQ,SAAC1a,EAAS2a,GACpB,IAAMtN,EAAQ,IAAIuN,MAClBvN,EAAM0M,iBAAiB,QAAQ,kBAAM/Z,EAAQqN,MAC7CA,EAAM0M,iBAAiB,SAAS,SAAAtI,GAAK,OAAIkJ,EAAOlJ,MAChDpE,EAAMwN,aAAa,cAAe,aAClCxN,EAAM+E,IAAMpK,MAGhB,SAAS8S,GAAeC,GACtB,OAAQA,EAAc5T,KAAK6T,GAAM,IASpB,SAAeC,GAA9B,qC,8CAAe,WAA6BC,EAAUC,GAAvC,uCAAAnS,EAAA,6DAAkDoS,EAAlD,+BAA6D,EAA7D,SACOX,GAAYS,GADnB,cACP7N,EADO,OAEPgO,EAASxF,SAASC,cAAc,UAChCF,EAAMyF,EAAOtF,WAAW,MAExBuF,EAAUnU,KAAKoU,IAAIlO,EAAMX,MAAOW,EAAMV,QACtC6O,EAAiBF,EAAU,EAAKnU,KAAKsU,KAAK,GAA/B,EAIjBJ,EAAO3O,MAAQ8O,EACfH,EAAO1O,OAAS6O,EAGhB5F,EAAI8F,UAAUF,EAAW,EAAGA,EAAW,GACvC5F,EAAI+F,OAAOb,GAAeM,IAC1BxF,EAAI8F,WAAWF,EAAW,GAAIA,EAAW,GAGzC5F,EAAIgG,UACFvO,EACAmO,EAAW,EAAkB,GAAdnO,EAAMX,MACrB8O,EAAW,EAAmB,GAAfnO,EAAMV,QAEjBwC,EAAOyG,EAAIiG,aAAa,EAAG,EAAGL,EAAUA,GAQ9CH,EAAO3O,MAAQ,IACf2O,EAAO1O,OAAS,IAIhBiJ,EAAIkG,aACF3M,EACA,EAAIqM,EAAW,EAAkB,GAAdnO,EAAMX,MAAcyO,EAAUY,EACjD,EAAIP,EAAW,EAAmB,GAAfnO,EAAMV,OAAewO,EAAUa,GAxCvC,kBA+CN,IAAItB,SAAQ,SAAA1a,GACjBqb,EAAOY,QAAO,SAAA7P,GACZ,IAAM8P,EAAU,IAAIC,KAAK,CAAC/P,GAAO,eAAgB,CAAEvL,KAAM,eACnDub,EAAY,CAChBhQ,KAAM,CACJI,KAAMJ,EAAKI,KACX3L,KAAMuL,EAAKvL,KACXuL,KAAM8P,EACNlb,KAAM,gBACNqb,QAAQ,GAEVC,KAAM,CACJtU,IAAKkE,IAAIC,gBAAgBC,KAG7BpM,EAAQoc,KACP,kBA/DQ,6C,iCCVTzI,GAAe,CACnBC,QAAS,CACPC,IAAK,MACLC,KAAM,MACNC,MAAO,OACPC,OAAQ,OACRC,UAAW,wBACXC,OAAQ,OACRC,QAAS,EACToI,UAAW,2BAIMC,G,kDAInB,WAAYxK,GAAQ,IAAD,8BACjB,cAAMA,IAJRyK,kBAAoB,KAGD,EAFnBC,YAAc,KAEK,EAYnBC,aAAe,SAAAC,GACb,EAAK7L,SAAS,CAAE6L,UAbC,EAgBnBC,eAAiB,SAACC,EAAaL,GAC7B,EAAKA,kBAAoBA,GAjBR,EAoBnBM,UApBmB,sBAoBP,sBAAA/T,EAAA,sEACeiS,GAAc,EAAKnU,MAAMoU,SAAU,EAAKuB,mBADvD,OACV,EAAKC,YADK,OAEV,EAAK1K,MAAMgL,SAAS,EAAKN,YAAYtQ,MACrC,EAAKkI,mBAHK,2CApBO,EA0BnB2I,aAAe,SAAAC,GACb,EAAKnM,SAAS,CAAEmM,UA3BC,EA8BnB5I,iBAAmB,kBAAO,EAAKvD,SAAS,CAAEsD,SAAS,KA9BhC,EAgCnB8I,gBAAkB,kBAAO,EAAKpM,SAAS,CAAEsD,SAAS,KAhC/B,EAkCnB+I,cAAgB,SAACnM,GACXA,EAAMC,OAAOmM,OAASpM,EAAMC,OAAOmM,MAAM,IAC3C,EAAKtM,SAAS,CACZmK,SAAUhP,IAAIC,gBAAgB8E,EAAMC,OAAOmM,MAAM,IACjDhJ,SAAS,KAtCI,EA2CnBiJ,oBAAsB,WAAO,IAAD,EAC1B,OACE,oCACE,yBAAK9M,UAAU,gBACb,2BAAO+M,QAAQ,cAAc/M,UAAU,sBACpC,EAAKkM,YACJ,yBAAKtK,IAAG,UAAE,EAAKsK,mBAAP,aAAE,EAAkBJ,KAAKtU,IAAKsK,IAAI,aAAaP,MAAO,CAAErF,MAAO,GAAIC,OAAQ,GAAIkG,aAAc,SACrG,kBAAC,KAAD,CAAiB6B,KAAM8I,KAAU5I,MAAO,WAG5C,2BAAOzU,GAAG,cAAcU,KAAK,OAAO2R,SAAU,EAAK4K,mBArDxC,EA2DnBK,wBAA0B,WACxB,OACE,yBAAKjN,UAAU,0BACb,2BAAO+M,QAAQ,cAAc/M,UAAU,iCACrC,kBAAC,KAAD,CAAiBkE,KAAMgJ,KAAa9I,MAAO,aAE7C,2BAAOzU,GAAG,cAAcU,KAAK,OAAO2R,SAAU,EAAK4K,kBA9DvD,EAAKtW,MAAQ,CACXuG,MAAO,GACP6N,SAAU,GACV0B,KAAM,CAAEb,EAAG,EAAGC,EAAG,GACjBkB,KAAM,EACN7I,SAAS,GARM,E,qDAsET,IACAsJ,EAAqBhd,KAAKqR,MAA1B2L,iBACAtJ,EAAY1T,KAAKmG,MAAjBuN,QACR,OACE,oCACGsJ,EACChd,KAAK8c,0BACL9c,KAAK2c,sBAEP,kBAAC,KAAD,CACExI,OAAQT,EACRU,eAAgBpU,KAAK2T,iBACrBU,aAAa,EACbjD,MAAO4B,GACPsB,iBAAiB,WAEjB,oCACE,yBAAKzE,UAAU,4BACb,4BAAQmC,QAAShS,KAAKoc,WAAtB,QACA,4BAAQpK,QAAShS,KAAK2T,kBAAtB,WAEF,yBAAK9D,UAAU,+BACb,kBAAC,KAAD,CACEnD,MAAO1M,KAAKmG,MAAMoU,SAClB0B,KAAMjc,KAAKmG,MAAM8V,KACjBM,KAAMvc,KAAKmG,MAAMoW,KACjBU,SAAU,CAAElR,MAAO,IAAKC,OAAQ,KAChCgQ,aAAchc,KAAKgc,aACnBE,eAAgBlc,KAAKkc,eACrBI,aAActc,KAAKsc,uB,GAvGMxM,aChBpBoN,I,mNACnB/W,MAAQ,CACN4E,YAAa,I,EAGfoS,cAAgB,SAAA7M,GAAK,OAAK,EAAKF,SAAS,CAAErF,YAAauF,EAAMC,OAAO3C,S,EAEpEwP,YAAc,SAACne,GACbA,EAAEyR,iBACF,EAAKW,MAAMgM,oBAAoB,EAAKlX,MAAM4E,aACvC6F,MAAK,kBAAO,EAAKR,SAAS,CAAErF,YAAa,QACzC8F,OAAM,kBAAO,EAAKT,SAAS,CAAErF,YAAa,S,EAG/CsR,SAAW,SAAC3P,GACV,EAAK2E,MAAMgM,oBAAoB,EAAKlX,MAAM4E,YAAa2B,GACpDkE,MAAK,kBAAO,EAAKR,SAAS,CAAErF,YAAa,QACzC8F,OAAM,kBAAO,EAAKT,SAAS,CAAErF,YAAa,S,uDAGrC,IACAA,EAAgB/K,KAAKmG,MAArB4E,YACR,OACE,gCACE,0BAAM6G,SAAU5R,KAAKod,aACnB,2BACEld,KAAK,OACL0N,MAAO7C,EACP8G,SAAU7R,KAAKmd,cACfpL,YAAY,wBACZ1R,KAAK,WACP,yBAAKwP,UAAU,mBACb,kBAAC,GAAD,CAAamN,kBAAgB,EAACX,SAAUrc,KAAKqc,YAE/C,4BAAQrK,QAAShS,KAAKod,aACpB,kBAAC,KAAD,CAAiBrJ,KAAMuJ,KAAcrJ,MAAO,iB,GAnCjBsJ,kBCkEjC5V,GAAO,I,6IAjEOnI,G,iEAChBG,IAAa2D,MAAMkK,IAAIhO,G,8KAGN+N,G,kFACXjK,EAAQtD,KAAKwd,SACb7Z,EAAc3D,KAAK2D,YACrB8Z,EAAc,GAGlBlQ,EAAI7H,SAAQ,SAAA3B,GACNA,IAASJ,EAAYnE,IAAO8D,EAAMS,IAAkB,MAATA,GAC7C0Z,EAAYzU,KAAKjF,MAGM,IAAvB0Z,EAAYrY,O,iEACczF,IAAa2D,MAAMkK,IAAI,CACnDC,SAAU,IACV3H,OAAQ,CACN4H,MAAO,KACPC,MAAO,KACPC,MAAO6P,K,OALLC,E,OAQAC,EAAWD,EAAgBhZ,MAAMZ,KAAI,SAAAC,GACzC,OAAO,IAAIuI,GAAUvI,EAAK8B,SAE5BO,GAAM6C,SAAS5F,EAAWsa,I,6IAIbpQ,GACb,IAAMlD,EAAgBrK,KAAK2D,YACvBsI,EAAS,KAMb,OALAsB,EAAI7H,SAAQ,SAAA3B,GACNA,IAASsG,EAAc7K,KACzByM,EAASlI,MAGNqC,GAAM+D,WAAW7G,MAAM2I,GAAQrE,S,mFAGdvH,G,8FAAMud,E,+BAAmB,MAE/CA,EAAmB,CAAC5d,KAAK2D,YAAYnE,K,SAEhBG,IAAa2D,MAAMkK,IAAI,CAAEC,SAAU,IAAK1F,UAAW1H,I,cAApEwd,E,OACFC,EAAW,GACfD,EAASnZ,MAAMgB,SAAQ,SAAA3B,GAChB6Z,EAAiB3G,SAASlT,EAAK8B,KAAKrG,KACvCse,EAAS9U,KAAK,IAAIsD,GAAUvI,EAAK8B,U,kBAG9BiY,G,yIAIP,OAAO1X,GAAM+D,WAAWxG,YAAYkC,O,+BAIpC,OAAOO,GAAM+D,WAAW7G,U,MAM5BU,OAAOsH,OAAO3D,IAECA,UC/DA,SAASoW,GAAT,GACb,OADuD,EAAdvY,YAEvC,KlBb0B,EkBcxB,OAAQ,kBAAC,KAAD,CAAiBuO,KAAMiK,KAAS/J,MAAO,SACjD,KlBduB,EkBerB,OAAQ,kBAAC,KAAD,CAAiBF,KAAMkK,KAAShK,MAAO,SACjD,KlBf4B,EkBgB1B,OAAQ,kBAAC,KAAD,CAAiBF,KAAMmK,KAAejK,MAAO,SACvD,KlBhBuB,EkBiBrB,OAAQ,kBAAC,KAAD,CAAiBF,KAAMmK,KAAejK,MAAO,YAEvD,QAAS,OAAQ,kBAAC,KAAD,CAAiBF,KAAMiK,KAAS/J,MAAO,W,WCdvCpN,G,kDAEnB,WAAYwK,GAAQ,IAAD,8BACjB,cAAMA,IAMR8M,YAAc,KAPK,EASnBnL,aAAe,CACbC,QAAS,CACPC,IAAK,MACLC,KAAM,MACNC,MAAO,OACPC,OAAQ,OACRC,UAAW,wBACXC,OAAQ,OACRC,QAAS,IAjBM,EAqBnB4K,aAAe,SAACC,GAAiB,IACvB/b,EAAY,EAAK+O,MAAjB/O,QACR,OAAoB,IAAhB+b,EAEA,oCACE,0BAAMjN,MAAO,CAAEkN,SAAU,eAAiBhc,EAAQ2C,MAClD,yBAAK4K,UAAU,6BACb,8BACE,oCACG+F,GAAQtT,EAAQ4C,YAEnB,oCACG,kBAAC6Y,GAAD,CAAkBvY,WAAYlD,EAAQkD,iBAQ/C,oCACE,0BAAM4L,MAAO,CAAEkN,SAAU,eAAiBhc,EAAQ2C,MAClD,yBAAK4K,UAAU,4BACb,8BAAO+F,GAAQtT,EAAQ4C,eA5Cd,EAmDnBqZ,cAAgB,SAACjO,EAAOhO,GACtBgO,EAAMI,iBACN,EAAKyN,YAAc7b,EAAQ4E,WAAW,GACtC,EAAKkJ,SAAS,CAAEsD,SAAS,KAtDR,EAyDnBC,iBAAmB,kBAAM,EAAKvD,SAAS,CAAEsD,SAAS,KAzD/B,EA2DnB8K,oBAAsB,WAAO,IAAD,EACO,EAAKnN,MAA9B/O,EADkB,EAClBA,QAAS+b,EADS,EACTA,YACjB,OACE,oCACE,yBAAKxO,UAAU,qCACb,yBAAKuB,MAAO,CACVe,gBAAgB,OAAD,OAAS7P,EAAQ4E,WAAW,GAAGG,IAA/B,KACf+K,mBAAoB,SACpBrG,MAAO,OACPC,OAAQ,OACRuH,OAAQ,oBACRkL,OAAQ,WAERzM,QAAS,SAAC/S,GAAD,OAAO,EAAKsf,cAActf,EAAGqD,OAGzB,IAAhB+b,EACC,yBAAKxO,UAAU,6BACb,8BACE,oCACG+F,GAAQtT,EAAQ4C,YAEnB,oCACG,kBAAC6Y,GAAD,CAAkBvY,WAAYlD,EAAQkD,gBAI7C,yBAAKqK,UAAU,4BACb,8BAAO+F,GAAQtT,EAAQ4C,eArF/B,EAAKiB,MAAQ,CACXuN,SAAS,GAHM,E,qDA8FT,IAAD,EACyE1T,KAAKqR,MAA7E/O,EADD,EACCA,QAAS+b,EADV,EACUA,YAAaK,EADvB,EACuBA,gBAAiBC,EADxC,EACwCA,gBAAiBC,EADzD,EACyDA,YACxDlL,EAAY1T,KAAKmG,MAAjBuN,QACFmL,EAAU,IAAIjK,GAAegK,GAEnC,OACE,oCACGlL,GACC,kBAAC,KAAD,CACES,OAAQT,EACRU,eAAgBpU,KAAK2T,iBACrBU,aAAa,EACbjD,MAAOpR,KAAKgT,aACZsB,iBAAiB,2BAEjB,yBAAKzE,UAAU,kCACb,kBAAC,KAAD,CAAiBkE,KAAM+K,KAAe7K,MAAO,QAASjC,QAAShS,KAAK2T,mBACpE,yBACElC,IAAKzR,KAAKme,YAAY9W,IACtB0E,MAAO/L,KAAKme,YAAYpS,MACxBC,OAAQhM,KAAKme,YAAYnS,OACzB2F,IAAI,cAKZ,yBAAK9B,UAAU,uBACI,IAAhBwO,EACC,yBAAKxO,UAAU,6CACb,yBAAKuB,MAAO,CAAEuD,SAAS,GAAD,OAAKkK,EAAQ9J,cAAb,OAAkClF,UAAU,yCAC/DvN,EAAQ4E,WACPlH,KAAKwe,oBAAoB,GACzBxe,KAAKoe,aAAa,KAIxB,yBAAKvO,UAAU,4CACb,yBAAKA,UAAU,uBACZ8O,GACC,kBAAC1M,GAAD,CAAQ3R,MAAOoe,EAAgB9W,OAAQvH,KAAMqe,EAAgBre,MAAQqe,EAAgB3W,UAAW8D,KAAM,MAG1G,yBAAKuF,MAAO,CAAEuD,SAAS,GAAD,OAAKrS,EAAQ4E,WAAa2X,EAAQ7J,YAAc,GAAK6J,EAAQ7J,YAA7D,OAAgFnF,UAAU,wCAC7GvN,EAAQ4E,WACPlH,KAAKwe,oBAAoB,GACzBxe,KAAKoe,aAAa,W,GA7ICtO,aCM/BiP,I,yDAeJ,WAAY1N,GAAQ,IAAD,8BACjB,cAAMA,IAfR6E,YAAc,EAcK,EAbnBC,aAAe,EAaI,EAZnBC,mBAAqB,KAYF,EAXnBC,MAAQ,KAWW,EAVnB2I,eAAgB,EAUG,EATnBC,gBAAkB,KASC,EARnBC,kBAAmB,EAQA,EAPnBC,qBAAuB,KAOJ,EAJnBC,WAAa,EAIM,EAHnBC,cAAgB,EAGG,EAFnBC,iBAAmB,EAEA,EAanBC,iBAAmB,SAACxb,EAAMsX,GACxB,EAAK+D,WAAa/D,EAClB,EAAKgE,cAAgBtb,EAAKyb,YAAYC,YAAYzT,OAC9C,EAAKkT,kBAAoB,EAAKC,sBAAwB9D,EAAI,MAC5D,EAAK6D,kBAAmB,EACxB1H,GAAYpP,gBAAgB,EAAKiJ,MAAMtL,gBACpC6K,MAAK,SAAA1H,GACqB,EAAKiW,qBAAX,MAAnBjW,EACA,EAAKgW,kBAAmB,OArBb,EA0BnBQ,cA1BmB,sBA0BH,4BAAArX,EAAA,6DACRtI,EAASyX,GAAYmI,cAAc,EAAKtO,MAAMtL,eAAevG,IADrD,SAIRogB,GAAaC,aAAa9f,EAAOc,eAJzB,OAMd2W,GAAYsI,YAAY/f,GACrB8Q,OAAM,SAAA5R,GAAC,OAAI6U,MAAM,aAAD,OAAcrF,KAAKa,UAAUrQ,QAC7C2R,MAAK,SAAA1H,GACqB,EAAKiW,qBAAX,MAAnBjW,EACA,EAAKkH,SAAS,CACZ4O,eAAe,EACflI,eAAgBpC,GAAeqL,sBAAsB,CACnDhU,MAAO,EAAKmK,YACZpT,SAAU/C,EAAOP,GACjB6K,cAAe,EAAK2V,gBAAgBxgB,KAEtC2X,aAAc,EAAKhR,MAAMgR,aAAaC,cAAc,EAAK/F,MAAMlN,SAASpE,EAAOP,OAEjF,EAAKwL,iBACL,EAAKkU,kBAAmB,KApBd,2CA1BG,EA2EnBe,qBAAuB,WACrBtJ,YAAW,WACT,IAAMuJ,EAAahL,SAASsB,eAAe,aAAa2J,SAAS,GAAGA,SAAS,GAAGA,SAAS,GAAG/O,MAAMpF,OAC5FoU,EAAmBF,EAAWtN,MAAM,EAAGsN,EAAW9a,OAAS,GAC3Dib,EAAY,EAAKjB,YAAcgB,EAAmB,EAAKf,eAC7D,EAAKJ,gBAAgBqB,eAAe,EAAGD,KACtC,MAjFc,EAwFnB9J,aAAe,WAGb,GAFA,EAAKL,YAAchB,SAASsB,eAAe,aAAaC,YACxD,EAAKN,aAAejB,SAASsB,eAAe,aAAaE,cACpD,EAAKL,MAAO,CACf,IAAMtW,EAASyX,GAAYmI,cAAc,EAAKtO,MAAMtL,eAAevG,IACnE,EAAK6W,MAAQM,YAAW,WACtBC,aAAa,EAAKP,OAClB,EAAKA,MAAQ,KACb,EAAKjG,SAAS,CACZyG,UAAU,EACVC,eAAgBpC,GAAeqL,sBAAsB,CACnDhU,MAAO,EAAKmK,YACZpT,SAAU/C,EAAOP,GACjB6K,cAAe,EAAK2V,gBAAgBxgB,SAGvC,OAxGY,EA4GnB6d,oBA5GmB,uCA4GG,WAAOtS,EAAayB,GAApB,eAAAnE,EAAA,yDACdtI,EAASyX,GAAYmI,cAAc,EAAKtO,MAAMtL,eAAevG,MAC/DuL,EAAY3F,QAAU,IAAMoH,EAFZ,iEAGdgL,GAAY4F,YAAYrd,EAAQgL,EAAayB,EAAK,EAAKxB,gBAHzC,2CA5GH,0DAkHnBuV,eAAiB,YAEfhJ,EADmB,EAAKlG,MAAhBkG,QACD,UApHU,EAuHnBiJ,eAAiB,SAACtgB,EAAMoX,GAAU,IACxBhU,EAAU,EAAK+N,MAAf/N,MAEF+a,EAAc,EAAK2B,gBAAgBxgB,KAAO8X,EAAK3Q,UAAY,EAAI,EAC/D+X,EAAkC,IAAhBL,EAAoB/a,EAAMgU,EAAK3Q,WAAa,KAChEgY,EAAkB,KAOtB,OALIze,EAAO,GAAqB,IAAhBme,IACb,EAAKlY,MAAMgR,aAAawC,MAAMzZ,EAAO,GAAGyG,aAAe2Q,EAAK3Q,YAC7DgY,GAAkB,GAIlB,kBAAC,GAAD,CACEN,YAAaA,EACb/b,QAASgV,EACToH,gBAAiBA,EACjBC,gBAAiBA,EACjBC,YAAa,EAAK1I,eAzIL,EA8InByJ,cAAgB,WACd,OAAOnI,GAAYmI,cAAc,EAAKtO,MAAMtL,eAAevG,KA/I1C,EAkJnBwL,eAAiB,WACX,EAAKiU,iBACP,EAAKA,gBAAgBwB,cAAc,EAAKta,MAAMgR,aAAawC,MAAMvU,OAAS,GAAG,IAlJ/E,EAAKe,MAAQ,CACX0Q,UAAU,EACVM,aAAc,IAAI6B,iBAAa,SAACC,EAAIC,GAClC,OAAOD,IAAOC,GAAMD,EAAGzT,aAAe0T,EAAG1T,cAE3CsR,eAAgB,IAElB,EAAKkJ,gBAAkB5Z,GAAM+D,WAAWxG,YAAYkC,KATnC,E,gEAmDjBsT,OAAOC,iBAAiB,SAAUpZ,KAAKuW,cACvCvW,KAAKkW,YAAchB,SAASsB,eAAe,aAAaC,YACxDzW,KAAKmW,aAAejB,SAASsB,eAAe,aAAaE,aACzD1W,KAAK0f,kB,yCAGYgB,GAAY,IAAD,OACtB3gB,EAASyX,GAAYmI,cAAc3f,KAAKqR,MAAMtL,eAAevG,IAE/DkhB,EAAUvc,SAASpE,EAAOP,KAC5BkhB,EAAUvc,SAASpE,EAAOP,MAAQQ,KAAKqR,MAAMlN,SAASpE,EAAOP,MAE7D6N,QAAQsT,IAAI,oBAAqBD,EAAUvc,SAASpE,EAAOP,KAC3D6N,QAAQsT,IAAI,oBAAqB3gB,KAAKqR,MAAMlN,SAASpE,EAAOP,KAExDQ,KAAKqR,MAAMlN,SAASpE,EAAOP,IAAI4F,QACjCpF,KAAKoQ,SAAS,CACZ+G,aAAcnX,KAAKmG,MAAMgR,aAAaC,cAAcpX,KAAKqR,MAAMlN,SAASpE,EAAOP,OAC9E,WAAQ,EAAKygB,6B,6CAgBpB9G,OAAOI,oBAAoB,SAAUvZ,KAAKuW,gB,+BAmElC,IAGJqK,EAHG,SAC2D5gB,KAAKmG,MAA/DgR,EADD,EACCA,aAAcL,EADf,EACeA,eAAgBD,EAD/B,EAC+BA,SAAUmI,EADzC,EACyCA,cAQhD,OAP2Bhf,KAAKqR,MAAxBtL,iBAIN6a,EAAgB5gB,KAAK2f,iBAIrB,yBAAK9P,UAAU,kBACb,gCACGsJ,OAAO0H,WAAa,KACnB,4BAAQ7O,QAAShS,KAAKugB,gBACpB,kBAAC,KAAD,CAAiBxM,KAAM+M,KAAe7M,MAAO,YAD/C,QAKF,kBAAChC,GAAD,CAAQ3R,MAAOsgB,EAActgB,MAAOD,KAAMugB,EAAcvgB,KAAMwL,KAAM,KACpE,4BAAK+U,EAAcvgB,OAErB,yBAAKwP,UAAU,YAAYrQ,GAAG,aAC3BqX,GAAYmI,EACX7H,EAAawC,MAAMvU,OAAS,GAC5B,oCACE,kBAAC,oBAAD,CACEgM,MAAO,CACLrF,MAAO/L,KAAKkW,YACZlK,OAAQhM,KAAKmW,cAEf4K,IAAK,SAAAA,GAAG,OAAI,EAAK9B,gBAAkB8B,GACnC5J,aAAcA,EACdL,eAAgBA,EAChB8C,YAAa5Z,KAAKwgB,eAClBQ,SAAU,SAACjd,EAAMqX,EAAGC,GAClB,EAAKkE,iBAAiBxb,EAAMsX,OAG5B,kBAAC,GAAD,OAGV,kBAAC,GAAD,CAAWgC,oBAAqBrd,KAAKqd,2B,GAhN1BE,kBA4NJvO,gBANS,SAAC,GAAD,MAA0C,CAChEjJ,eADsB,EAAGA,eAEzB5B,SAFsB,EAAmBA,SAGzCb,MAHsB,EAA6BA,SAMtC0L,CAAyB+P,I,OCzOzB,SAASkC,KACtB,OACE,yBAAKpR,UAAU,yBACb,uE,OCDS,SAASqR,GAAT,GAAyC,IAAX3J,EAAU,EAAVA,OAI3C,OACE,yBAAK1H,UAAU,wBACb,4BAAQmC,QALZ,WACEuF,EAAO,YAKH,kBAAC,KAAD,CAAiBxD,KAAM+M,KAAe7M,MAAO,UAC7C,wC,WCLatM,G,4MACnBxB,MAAQ,CACNgb,gBAAgB,G,iEAGE,IAAD,EACanhB,KAAKqR,OACnC+P,EAFiB,EACTA,aADS,EACIvb,Q,yCAIJyT,GACbA,EAAU+H,gBAAkBrhB,KAAKqR,MAAMgQ,eACzCrhB,KAAKoQ,SAAS,CAAE+Q,eAAgBnhB,KAAKqR,MAAMgQ,kB,+BAIrC,IAAD,SACqCrhB,KAAKqR,MAAzCxL,EADD,EACCA,KAAMwb,EADP,EACOA,cAAeC,EADtB,EACsBA,WACrBH,EAAmBnhB,KAAKmG,MAAxBgb,eACR,OACE,yBAAKtR,UAAU,qBAAqBmC,QAAS,kBAAM,EAAKuP,qBACtD,yBAAK1R,UAAU,2BACb,kBAACoC,GAAD,CAAQ3R,MAAOuF,EAAK+B,OAAQvH,KAAMwF,EAAKkC,UAAW8D,KAAM,KACxD,8BAAOhG,EAAKkC,YAEbuZ,EAAaH,GAAkBE,EAC9B,kBAAC,KAAD,CAAiBtN,KAAMyN,KAAevN,MAAO,UAE3C,kBAAC,KAAD,CAAiBF,KAAM0N,KAAaxN,MAAO,UACzC,kBAAC,KAAD,CAAiBF,KAAM2N,KAAczN,MAAO,e,GA7BxBsJ,iBCUboE,I,yDAOnB,WAAYtQ,GAAQ,IAAD,8BACjB,cAAMA,IAPRuQ,UAAY,GAMO,EALnBC,cAAe,EAKI,EAJnBR,cAAgB,GAIG,EAHnBS,gBAAiB,EAGE,EAFnBpV,MAAQ,KAEW,EAWnB6U,iBAAmB,SAAC1b,GAClB,IAAIzB,EAAS,GACb,EAAKid,cAAc3b,SAAQ,SAAA3B,GACrBA,EAAKvE,KAAOqG,EAAKrG,IACnB4E,EAAO4E,KAAKjF,MAGhB,EAAKsd,cAAgBjd,EACrB,EAAKgM,SAAS,CAAE2R,UAAW,EAAK5b,MAAM4b,YAnBrB,EAsBnB1F,SAAW,SAAC3P,GACV,EAAKA,MAAQA,GAvBI,EA0BnBsV,aAAe,WACb,IAAIC,EAAM,EAAK9b,MAAM+b,WAAWhX,OACxBqM,EAAW,EAAKlG,MAAhBkG,OAER,GAAI0K,EAAI7c,OAAS,EACf,OAAO2L,KAAK,UAAW,kDAEzB,EAAKX,SAAS,CAAEH,UAAU,IAC1B,IAAMpP,EAAgB,EAAKwgB,cAAcvd,KAAI,SAAAC,GAC3C,OAAOA,EAAKvE,MAEdgY,GAAY2K,mBAAmBthB,EAAeohB,EAAK,EAAKvV,OACrDkE,MAAK,SAACjE,GACL,EAAKyD,SAAS,CAAEH,UAAU,IAC1BuH,GAAYC,gBAAgB9K,GAC5B6K,GAAY4K,sBAAsBzV,GAClC4K,EAAO,iBAER1G,OAAM,SAACC,GACN,EAAKV,SAAS,CAAEH,UAAU,IAC1Bc,KAAK,QAASD,OA9CD,EAkDnBuR,YAAc,SAACpjB,GACbA,EAAEyR,iBADiB,IAGfuR,EADgB,EAAK9b,MAAjBmc,QACUpX,OACd+W,EAAI7c,OAAS,GACf,EAAKgL,SAAS,CAAEH,UAAU,IAC1B2P,GAAa2C,oBAAoBN,GAC9BrR,MAAK,SAAAtN,GACJ,EAAKse,UAAYte,EACjB,EAAKue,cAAe,EACpB,EAAKzR,SAAS,CAAEH,UAAU,OAE3BY,OAAM,WACL,EAAKgR,cAAe,EACpB,EAAKzR,SAAS,CAAEH,UAAU,QAG9Bc,KAAK,UAAD,iCAnEW,EAuEnByR,iBAAmB,WACjB,EAAKnB,cAAgB,GACrB,EAAKjR,SAAS,CAAEkR,YAAa,EAAKnb,MAAMmb,cAzEvB,EA4EnBF,YAAc,SAACvb,GAAU,IACf0R,EAAW,EAAKlG,MAAhBkG,OAGR,IAAK,EAAKpR,MAAMmb,WACd,OAAO9J,GAAYiL,oBAAoB5c,EAAKrG,IACzCoR,MAAK,SAACjE,GACL6K,GAAYC,gBAAgB9K,GAC5B6K,GAAY4K,sBAAsBzV,GAClC4K,EAAO,iBAER1G,OAAM,SAACC,GACN,EAAKV,SAAS,CAAEH,UAAU,IAC1Bc,KAAK,QAASD,MAMpB,GADmB,EAAKuQ,cAAc9Z,MAAK,SAAAxD,GAAI,OAAIA,EAAKvE,KAAOqG,EAAKrG,MACpD,CACd,IAAI4E,EAAS,GACb,EAAKid,cAAc3b,SAAQ,SAAA3B,GACrBA,EAAKvE,KAAOqG,EAAKrG,IACnB4E,EAAO4E,KAAKjF,MAGhB,EAAKsd,cAAgBjd,MAChB,CACL,GAAkC,IAA9B,EAAKid,cAAcjc,OAErB,YADA2L,KAAK,UAAD,0BAGN,EAAKsQ,cAAcrY,KAAKnD,GAE1B,EAAKuK,SAAS,CAAE2R,UAAW,EAAK5b,MAAM4b,YA9GrB,EAiHnBW,YAAc,SAACpL,GACb,IAAMqL,EAAa,EAAKtB,cAAc9Z,MAAK,SAAAxD,GAAI,OAAIA,EAAKvE,KAAO8X,EAAK9X,MACpE,OACE,kBAAC,GAAD,CACEqG,KAAMyR,EACN8J,YAAa,EAAKA,YAClBE,WAAY,EAAKnb,MAAMmb,WACvBD,gBAAesB,EACfC,IAAKtL,EAAK9X,MAzHG,EA8HnBwX,aAAe,SAAC1G,GAAD,OAAY,EAAKF,SAAS,CAAEkS,QAAShS,EAAMC,OAAO3C,SA9H9C,EAgInBiV,iBAAmB,SAACvS,GAAD,OAAY,EAAKF,SAAS,CAAE8R,WAAY5R,EAAMC,OAAO3C,SAhIrD,EAkInBkV,qBAAuB,SAAC/e,GACtB,OACE,4BACE6e,IAAK7e,EAAKvE,GACVqQ,UAAU,qCACVmC,QAAS,kBAAM,EAAKuP,iBAAiBxd,KAErC,kBAACkO,GAAD,CACE3R,MAAOyD,EAAK6D,OACZvH,KAAM0D,EAAKgE,UACX8D,KAAM,KAER,kBAAC,KAAD,CAAiBkI,KAAM+K,KAAe7K,MAAO,WA5IjD,EAAK9N,MAAQ,CACXmc,QAAS,GACTrS,UAAU,EACVqR,YAAY,EACZY,WAAY,GACZH,UAAU,GAPK,E,qDAmJT,IAAD,OACCxK,EAAWvX,KAAKqR,MAAhBkG,OADD,EAE+CvX,KAAKmG,MAAnDmc,EAFD,EAECA,QAAShB,EAFV,EAEUA,WAAYrR,EAFtB,EAEsBA,SAAUiS,EAFhC,EAEgCA,WACjCa,EAAe5J,OAAO0H,WAAa,IAAM,EAAI,GAC7CmC,EAAY1B,EAAa,IAAMyB,EAAe,IAAMA,EAE1D,OACE,yBAAKlT,UAAU,2BACZsJ,OAAO0H,WAAa,KACnB,kBAAC,GAAD,CAAoBtJ,OAAQA,IAE7BtH,GACC,yBAAKmB,MAAO,CAAEsI,SAAU,WAAY3N,MAAO,OAAQC,OAAQ,SACzD,kBAAC,GAAD,OAGJ,yBAAK6D,UAAU,sBACb,yBAAKA,UAAU,gCACb,kBAAC,GAAD,CAAawM,SAAUrc,KAAKqc,WAC5B,2BACEnc,KAAK,OACL6R,YAAY,gBACZnE,MAAOsU,EACPrQ,SAAU7R,KAAK6iB,oBAEnB,0BAAMhT,UAAU,4BAA4B+B,SAAU5R,KAAKqiB,aACzD,2BACEniB,KAAK,OACL0N,MAAO0U,EACPzQ,SAAU7R,KAAKgX,aACflF,UAAQ,EACRC,YAAY,oBACZ1R,KAAK,WACP,4BAAQ2R,QAAShS,KAAKqiB,aACpB,kBAAC,KAAD,CAAiBtO,KAAM0F,KAAUxF,MAAO,YAI5C,yBAAKpE,UAAU,kCACb,4BAAQmC,QAAShS,KAAKwiB,kBACnBlB,EAAa,kBAAC,KAAD,CAAiBvN,KAAMkP,KAAShP,MAAO,YACnD,kBAAC,KAAD,CAAiBF,KAAMmP,KAAQjP,MAAO,YAExC,8BAAOqN,EAAU,6CAIpBA,GAActhB,KAAKqhB,cAAcjc,OAAS,GACzC,yBAAKyK,UAAU,qCACZ7P,KAAKqhB,cAAcvd,KAAI,SAAAC,GAAI,OAC1B,EAAK+e,qBAAqB/e,OAM/B/D,KAAK6hB,aACJ,kDACA,yBAAKhS,UAAU,2BAA2BuB,MAAO,CAAEpF,OAAO,gBAAD,OAAkBgX,EAAlB,SAErDhjB,KAAK4hB,UAAU9d,KAAI,SAACC,GAClB,OACE,EAAK2e,YAAY3e,OAO1B/D,KAAKqhB,cAAcjc,OAAS,GAC3B,yBAAKyK,UAAU,0BACb,4BAAQmC,QAAShS,KAAKgiB,cAAtB,sB,GAjO4BzE,kBCNrB4F,I,yDACnB,WAAY9R,GAAQ,IAAD,8BACjB,cAAMA,IAaR+R,aAAe,SAAC7L,GACd,EAAKnH,SAAS,CAAEiT,UAAW9L,KAb3B,EAAKpR,MAAQ,CACXmd,UAAU,EACVD,UAAWhS,EAAMkS,MAAMlc,KAEzBgK,EAAMhN,QAAQmf,QAAQ,SACtB,EAAKC,YAActK,OAAO0H,WAPT,E,gEAWjBrJ,GAAYkM,mB,+BAOJ,IAAD,OACCL,EAAcrjB,KAAKmG,MAAnBkd,UACAE,EAAUvjB,KAAKqR,MAAfkS,MAER,OACE,yBAAK1T,UAAU,cACb,yBAAKA,UAAU,yBACZ7P,KAAKyjB,aAAe,IACnB,kBAACE,GAAA,EAAD,CAAK9T,UAAU,eACb,kBAAC+T,GAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGnU,UAAU,gBAC1C,kBAAC,GAAD,CAAS0H,OAAQvX,KAAKojB,gBAExB,kBAACQ,GAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGnU,UAAU,gBAC1C,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEoU,OAAK,EACLC,KAAI,UAAKX,EAAMlc,KACf8c,UAAWlD,KAEb,kBAAC,IAAD,CACEiD,KAAI,UAAKX,EAAMlc,IAAX,kBACJ8c,UAAW,kBAAM,kBAAC,GAAD,CAAc5M,OAAQ,EAAK6L,kBAE9C,kBAAC,IAAD,CACEc,KAAI,UAAKX,EAAMlc,IAAX,SACJ8c,UAAW,kBAAM,kBAAC,GAAD,CAAM5M,OAAQ,EAAK6L,kBAEtC,kBAAC,IAAD,CAAU5R,GAAI6R,OAKpB,kBAACM,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGnU,UAAU,gBAC1C,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEoU,OAAK,EACLC,KAAI,UAAKX,EAAMlc,KACf8c,UAAW,kBAAM,kBAAC,GAAD,CAAS5M,OAAQ,EAAK6L,kBAEzC,kBAAC,IAAD,CACEc,KAAI,UAAKX,EAAMlc,IAAX,kBACJ8c,UAAW,kBAAM,kBAAC,GAAD,CAAc5M,OAAQ,EAAK6L,kBAE9C,kBAAC,IAAD,CACEc,KAAI,UAAKX,EAAMlc,IAAX,SACJ8c,UAAW,kBAAM,kBAAC,GAAD,CAAM5M,OAAQ,EAAK6L,kBAEtC,kBAAC,IAAD,CACEc,KAAI,QACJC,UAAW,kBAAM,kBAAC,GAAD,CAAM7S,eAAa,OAEtC,kBAAC,IAAD,CAAUE,GAAI6R,a,GAvEEvT,cCIbsU,G,kDACnB,WAAY/S,GAAQ,IAAD,8BACjB,cAAMA,IAQRgT,SATmB,sBASR,4BAAAhc,EAAA,sEACc4F,GAAYC,OAD1B,OACHoW,EADG,OAET,EAAKlU,SAAS,CAAEkT,SAAUgB,EAAUrU,UAAU,IAFrC,2CAPT,EAAK9J,MAAQ,CACXmd,UAAU,EACVrT,UAAU,GAEZ,EAAKoU,WANY,E,qDAcT,IAAD,EACwBrkB,KAAKmG,MAA5Bmd,EADD,EACCA,SAAUrT,EADX,EACWA,SAClB,OAEE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAU7J,MAAOA,IACd6J,EACC,yBAAKmB,MAAO,CAAEsI,SAAU,WAAY3N,MAAO,OAAQC,OAAQ,SACzD,kBAAC,GAAD,OAEA,oCACA,kBAAC,IAAD,CAAOkY,KAAK,QAAQC,UAAWhB,KAC/B,kBAAC,IAAD,CAAOe,KAAK,QAAQC,UAAWpU,KAC/B,kBAAC,IAAD,CAAUyB,GAAI8R,W,GA5BMxT,aCJdyU,QACW,cAA7BpL,OAAOqL,SAASC,UAEe,UAA7BtL,OAAOqL,SAASC,UAEhBtL,OAAOqL,SAASC,SAASlB,MACvB,2DCbNmB,IAASC,OAAO,kBAAC,GAAD,MAAUzP,SAASsB,eAAe,SD8H5C,kBAAmBoO,WACrBA,UAAUC,cAAcC,MAAMlU,MAAK,SAAAmU,GACjCA,EAAaC,kB","file":"static/js/main.fe3c0460.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 289;","import ConnectyCube from 'connectycube'\n\nexport function getImageLinkFromUID(uid) {\n  if (!uid) {\n    return null\n  }\n  return ConnectyCube.storage.privateUrl(uid)\n}\n\n\nexport function preparationAttachment(file) {\n  return {\n    size: file.size,\n    uid: file.uid,\n    type: file.content_type,\n    name: file.name,\n    width: 400,\n    height: 400\n  }\n}\n","import { getImageLinkFromUID } from '../helpers/file'\n\nexport default class Dialog {\n  constructor(dialog) {\n    this.id = dialog._id || dialog.id\n    this.type = dialog.type\n    this.xmpp_room_jid = dialog.xmpp_room_jid\n    this.xmpp_type = dialog.type === 3 ? 'chat' : dialog.type ? 'groupchat' : ''\n    this.name = dialog.name\n    this.photo = Dialog.getAvatarUrl(dialog.photo)\n    this.description = dialog.description\n    this.destination = dialog.xmpp_room_jid || dialog.room_jid\n    this.user_id = dialog.user_id\n    this.admins_ids = dialog.admins_ids\n    this.occupants_ids = dialog.occupants_ids\n    this.updated_date = Date.parse(dialog.updated_at) || Date.now()\n    this.last_message_date_sent = dialog.last_message_date_sent || Date.parse(dialog.updated_at) / 1000 || Date.parse(dialog.created_at) / 1000\n    this.last_message = dialog.last_message || ''\n    this.last_message_id = dialog.last_message_id\n    this.last_message_user_id = dialog.last_message_user_id\n    this.unread_messages_count = dialog.unread_messages_count\n    this.unread_messages_ids = dialog.unread_messages_ids\n    this.pinned_messages_ids = dialog.pinned_messages_ids\n  }\n\n  static getAvatarUrl(avatarUID) {\n    return getImageLinkFromUID(avatarUID)\n  }\n}\n","export const FETCH_DIALOGS = 'FETCH_DIALOGS'\nexport const ADD_DIALOG = 'ADD_DIALOG'\nexport const SORT_DIALOGS = 'SORT_DIALOGS'\nexport const UPDATE_DIALOG = 'UPDATE_DIALOG'\nexport const DELETE_DIALOG = 'DELETE_DIALOG'\n\nexport const fetchDialogs = dialogs => ({ type: FETCH_DIALOGS, dialogs: dialogs })\nexport const updateDialog = dialog => ({ type: UPDATE_DIALOG, dialog })\nexport const addNewDialog = dialog => ({ type: ADD_DIALOG, dialog: dialog })\nexport const sortDialogs = (message, count) => ({ type: SORT_DIALOGS, message: message, count: count })\nexport const deleteDialog = dialogId => ({ type: DELETE_DIALOG, dialogId })\n","export const FETCH_MESSAGES = 'FETCH_MESSAGES'\nexport const PUSH_MESSAGE = 'PUSH_MESSAGE'\nexport const DELETE_ALL_MESSAGES = 'DELETE_ALL_MESSAGES'\nexport const LAZY_FETCH_MESSAGES = 'LAZY_FETCH_MESSAGES'\nexport const UPDATE_MESSAGES = 'UPDATE_MESSAGES'\n\nexport const fetchMessages = (dialogId, history) => ({ type: FETCH_MESSAGES, dialogId, history })\nexport const lazyFetchMessages = (dialogId, history) => ({ type: LAZY_FETCH_MESSAGES, dialogId, history })\nexport const updateMessages = (dialogId, msgId, msg) => ({ type: UPDATE_MESSAGES, dialogId, msgId, msg })\nexport const pushMessage = (message, dialogId) => ({ type: PUSH_MESSAGE, message, dialogId })\nexport const deleteAllMessages = dialogId => ({ type: DELETE_ALL_MESSAGES, dialogId })","export const SELECTED_DIALOG = 'SELECTED_DIALOG'\nexport const UN_SELECTED_DIALOG = 'UN_SELECTED_DIALOG'\n\nexport const selectedDialog = dialog => ({ type: SELECTED_DIALOG, dialog })\nexport const unSelectedDialog = dialog => ({ type: UN_SELECTED_DIALOG, dialog })","export const FETCH_USERS = 'FETCH_USERS'\nexport const ADD_USERS = 'ADD_USERS'\n\n\nexport const fetchUsers = users => ({ type: FETCH_USERS, users })\nexport const addUsers = users => ({ type: ADD_USERS, users })\n","export const SET_CURRENT_USER = 'SET_CURRENT_USER'\nexport const RESET_CURRENT_USER = 'RESET_CURRENT_USER'\nexport const UPDATE_CURRENT_USER = 'UPDATE_CURRENT_USER'\n\nexport const setCurrentUser = currentUser => ({ type: SET_CURRENT_USER, currentUser })\nexport const resetCurrentUser = () => ({ type: RESET_CURRENT_USER })\nexport const updateCurrentUser = currentUser => ({ type: UPDATE_CURRENT_USER, currentUser })\n","const updateDialog = (action, dialogs) => {\n  const alreadyUpdatedDialog = dialogs.map(elem => {\n    if (elem.id === action.dialog.id) {\n      return Object.assign(elem, action.dialog)\n    } return elem\n  })\n  return [...alreadyUpdatedDialog]\n}\n\nconst lazyFetchMessages = (action, messages) => {\n  const newArr = action.history.reverse().concat(messages[action.dialogId])\n  return { ...{}, [action.dialogId]: newArr }\n}\n\nconst sortedDialog = (action, dialogs) => {\n  const { message, count } = action\n  const updateDialog = dialogs.map(elem => {\n    if (elem.id === message.dialog_id) {\n      const newObj = {\n        last_message: message.body,\n        last_message_date_sent: message.date_sent,\n        updated_date: message.date_sent,\n        unread_messages_count: count ? elem.unread_messages_count += 1 : elem.unread_messages_count\n      }\n      return Object.assign(elem, newObj)\n    } return elem\n  })\n\n  const sort = (items, inverted = false) => items.sort((itemA, itemB) => {\n    const result = new Date(itemB.last_message_date_sent * 1000) - new Date(itemA.last_message_date_sent * 1000)\n    return inverted ? !result : result\n  })\n\n\n  const result = sort(updateDialog)\n\n  return [...result]\n}\n\nconst updateStatusMessages = (action, message) => {\n  if (Object.keys(message).length === 0) {\n    return message\n  }\n\n  const newMessages = message[action.dialogId].map((elem, index) => {\n    if (elem.id === action.msgId) {\n      const updateSendStatus = { ...elem }\n      updateSendStatus.send_state = action.msg.send_state\n      return { ...updateSendStatus }\n    }\n    return elem\n  })\n\n  const result = { ...message, [action.dialogId]: newMessages }\n\n  return result\n}\n\nconst fetchUsers = (action, users) => {\n  const newObjUsers = {}\n  action.forEach(elem => {\n    newObjUsers[elem.id] = elem\n  })\n  return { ...users, ...newObjUsers }\n}\n\nexport {\n  updateDialog,\n  lazyFetchMessages,\n  sortedDialog,\n  updateStatusMessages,\n  fetchUsers\n}","import { combineReducers } from 'redux'\nimport currentUser from './currentUser'\nimport dialogs from './dialogs'\nimport selectedDialog from './selectedDialog'\nimport messages from './messages'\nimport users from './users'\n\nconst appReducer = combineReducers({\n  currentUser,\n  dialogs,\n  selectedDialog,\n  messages,\n  users,\n})\n\n\nexport const LogOut = () => ({ type: 'RESSET_STORE' })\n\nconst rootReducer = (state, action) => {\n  if (action.type === 'RESSET_STORE') {\n    state = {}\n  }\n  return appReducer(state, action)\n}\n\n\nexport default rootReducer","import {\n  SET_CURRENT_USER,\n  UPDATE_CURRENT_USER,\n  RESET_CURRENT_USER\n} from '../actions/currentUser'\n\nexport default (currentUser = null, action) => {\n  switch (action.type) {\n    case SET_CURRENT_USER:\n      return action.currentUser\n\n    case UPDATE_CURRENT_USER: {\n      const result = Object.assign(currentUser.user, action.currentUser)\n      currentUser.user = result\n      return { ...currentUser }\n    }\n\n    case RESET_CURRENT_USER:\n      return null\n\n    default:\n      return currentUser\n  }\n}","import {\n  FETCH_DIALOGS,\n  ADD_DIALOG,\n  SORT_DIALOGS,\n  UPDATE_DIALOG,\n  DELETE_DIALOG\n} from '../actions/dialogs'\nimport { updateDialog, sortedDialog } from './reducer-function'\n\nexport default (dialogs = [], action) => {\n  switch (action.type) {\n    case FETCH_DIALOGS:\n      return action.dialogs\n\n    case UPDATE_DIALOG: {\n      const result = updateDialog(action, dialogs)\n      return result\n    }\n\n    case ADD_DIALOG:\n      return [action.dialog, ...dialogs]\n\n    case SORT_DIALOGS: {\n      const result = sortedDialog(action, dialogs)\n      return result\n    }\n\n    case DELETE_DIALOG: {\n      const result = dialogs.filter(dialog => dialog.id !== action.dialogId)\n      return result\n    }\n\n    default:\n      return dialogs\n  }\n}","import {\n  SELECTED_DIALOG,\n  UN_SELECTED_DIALOG\n} from '../actions/selectedDialog'\n\nexport default (dialog = null, action) => {\n  switch (action.type) {\n    case SELECTED_DIALOG: {\n      return { ...action.dialog }\n    }\n\n    case UN_SELECTED_DIALOG: {\n      return {}\n    }\n\n    default:\n      return dialog\n  }\n}","import {\n  PUSH_MESSAGE,\n  FETCH_MESSAGES,\n  DELETE_ALL_MESSAGES,\n  LAZY_FETCH_MESSAGES,\n  UPDATE_MESSAGES\n} from '../actions/messages'\n\nimport { lazyFetchMessages, updateStatusMessages } from './reducer-function'\n\nexport default (messages = {}, action) => {\n  switch (action.type) {\n    case FETCH_MESSAGES: {\n      const reverted = action.history\n      return { ...messages, [action.dialogId]: reverted.reverse() }\n    }\n\n    case LAZY_FETCH_MESSAGES: {\n      const result = lazyFetchMessages(action, messages)\n      return result\n    }\n\n    case UPDATE_MESSAGES: {\n      const mergedUpdatedMessages = updateStatusMessages(action, messages)\n      return mergedUpdatedMessages\n    }\n\n    case PUSH_MESSAGE: {\n      return {\n        ...messages,\n        [action.dialogId]: [...messages[action.dialogId] || [], action.message]\n      }\n    }\n\n    case DELETE_ALL_MESSAGES: {\n      return {\n        ...messages,\n        [action.dialogId]: []\n      }\n    }\n\n    default:\n      return messages\n  }\n}","import {\n  FETCH_USERS,\n} from '../actions/users'\n\nimport { fetchUsers } from './reducer-function'\n\nexport default (users = {}, action) => {\n  switch (action.type) {\n    case FETCH_USERS: {\n      return fetchUsers(action.users, users)\n    }\n\n    default: {\n      return users\n    }\n  }\n}","import { createStore } from 'redux'\nimport rootReducer from './reducers'\n\nconst store = createStore(rootReducer)\n\nexport default store","import { getImageLinkFromUID } from '../helpers/file'\n\nexport const STATUS_PENDING = 0\nexport const STATUS_SENT = 1\nexport const STATUS_DELIVERED = 2\nexport const STATUS_READ = 3\n\nexport const GROUP_CHAT_ALERT_TYPE = {\n  CREATE: \"create\"\n}\n\nconst defaultMessage = {\n  id: '',\n  body: '',\n  dialog_id: '',\n  date_sent: Math.floor(Date.now() / 1000),\n  attachments: null,\n  sender_id: null,\n  sender: null\n}\n\nexport class Message {\n  constructor(msg = defaultMessage, currentUser) {\n    this.id = msg.id || msg._id\n    this.body = msg.body || msg.message\n    this.group_chat_alert_type = msg.group_chat_alert_type || null\n    this.dialog_id = msg.chat_dialog_id || (msg.extension && msg.extension.dialog_id)\n    this.date_sent = msg.date_sent || (msg.extension && msg.extension.date_sent) || Math.floor(Date.now() / 1000)\n    this.send_state = Message.getSendState(msg, currentUser)\n    this.attachment = Message.getAttachment(msg)\n    this.sender_id = msg.sender_id || (msg.extension && msg.extension.sender_id)\n    this.sender = msg.sender_id\n  }\n\n  static getAttachment(msg) {\n    if (msg.attachments && msg.attachments.length > 0) {\n      const attachments = { ...msg.attachments[0] }\n      const parseLink = getImageLinkFromUID(msg.attachments[0].uid)\n      attachments.url = parseLink\n      return [attachments]\n    } else if (msg?.extension?.attachments && msg.extension.attachments.length > 0) {\n      const attachments = { ...msg.extension.attachments[0] }\n      const parseLink = getImageLinkFromUID(msg.extension.attachments[0].uid)\n      attachments.url = parseLink\n      return [attachments]\n    } else return null\n  }\n\n  static getSendState(msg, currentUser) {\n    if (msg?.read_ids?.find(_id => _id !== currentUser)) {\n      return STATUS_READ\n    }\n    if (msg?.delivered_ids?.find(msg => msg.delivered_ids !== currentUser)) {\n      return STATUS_DELIVERED\n    }\n    return STATUS_PENDING\n  }\n\n}\n\nexport class FakeMessage {\n  constructor(msg) {\n    this.attachment = msg.extension.attachments\n    this.body = msg.body\n    this.date_sent = msg.extension.date_sent\n    this.dialog_id = msg.extension.dialog_id\n    this.id = msg.id\n    this.send_state = 0\n    this.sender = undefined\n    this.sender_id = msg.extension.sender_id\n  }\n}","import { getImageLinkFromUID } from '../helpers/file'\n\nexport default class User {\n\n  constructor(user) {\n    this.id = user.id\n    this.avatar = User.getAvatarUrl(user.avatar)\n    this.login = user.login\n    this.custom_data = user.custom_data ? user.custom_data : ''\n    this.full_name = user.full_name || user.login\n    this.phone = user.phone\n    this.created_at = user.created_at\n    this.updated_at = user.updated_at\n    this.last_request_at = user.last_request_at\n  }\n  static getAvatarUrl(avatarUID) {\n    return getImageLinkFromUID(avatarUID)\n  }\n}\n","export const BTN_TYPE = {\n  DIALOG: 1,\n  CONTACTS: 2,\n  CREATE_GROUP: 3,\n}\n\nexport const DIALOG_TYPE = {\n  PRIVATE: 3,\n  GROUP: 2,\n  BROADCAST: 1,\n  PUBLIC_CHANNEL: 4\n}","import ConnectyCube from 'connectycube'\nimport Dialog from '../models/dialogs'\nimport {\n  fetchDialogs,\n  sortDialogs,\n  updateDialog,\n  addNewDialog,\n} from '../actions/dialogs'\nimport {\n  pushMessage,\n  fetchMessages,\n  lazyFetchMessages,\n  updateMessages,\n} from '../actions/messages'\nimport { preparationAttachment } from '../helpers/file'\nimport { selectedDialog } from '../actions/selectedDialog'\nimport { fetchUsers } from '../actions/users'\nimport store from '../store'\nimport { Message, FakeMessage } from '../models/message'\nimport UserModel from '../models/user'\nimport { DIALOG_TYPE } from '../helpers/constants'\nimport {\n  STATUS_DELIVERED,\n  STATUS_READ,\n  STATUS_SENT,\n  GROUP_CHAT_ALERT_TYPE\n} from '../models/message'\n\nclass ChatService {\n\n  setUpListeners() {\n    ConnectyCube.chat.onMessageListener = this.onMessageListener.bind(this)\n    ConnectyCube.chat.onSentMessageCallback = this.onSentMessageListener.bind(this)\n    ConnectyCube.chat.onDeliveredStatusListener = this.onDeliveredStatus.bind(this)\n    ConnectyCube.chat.onReadStatusListener = this.onReadStatus.bind(this)\n  }\n\n  async fetchDialogsFromServer() {\n    if (store.getState().dialogs.length !== 0) {\n      return store.getState().dialogs\n    }\n    const dialogsFromServer = await ConnectyCube.chat.dialog.list()\n    const currentUserId = this.currentUser\n    let privatChatIdsUser = []\n\n    const dialogs = dialogsFromServer.items.map(elem => {\n      if (elem.type === DIALOG_TYPE.PRIVATE) {\n        elem.occupants_ids.forEach(elem => {\n          elem !== currentUserId.id && privatChatIdsUser.push(elem)\n        })\n      }\n      return new Dialog(elem)\n    })\n\n    if (privatChatIdsUser.length !== 0) {\n      const usersInfo = await this.getUsersList(privatChatIdsUser)\n      store.dispatch(fetchUsers(usersInfo))\n    }\n\n    store.dispatch(fetchDialogs(dialogs))\n    return store.getState().dialogs\n  }\n\n  async getMessages(dialog) {\n    const isAlredyUpdate = this.getMessagesByDialogId(dialog.id)\n    let amountMessages = null\n\n    // If the first entry into the chat\n    if (!dialog.isAlreadyMessageFetch || dialog.unread_messages_count > 0 && !dialog.isAlreadyMessageFetch) {\n      const historyFromServer = await ConnectyCube.chat.message.list({\n        chat_dialog_id: dialog.id,\n        sort_desc: 'date_sent'\n      })\n\n      const messages = []\n      historyFromServer.items.forEach(elem => {\n        if (!elem.group_chat_alert_type) {\n          messages.push(new Message(elem, this.currentUser.id))\n        }\n      })\n\n      const newObj = Object.assign(dialog, { isAlreadyMessageFetch: true })\n      this.updateDialogsUnreadMessagesCount(newObj)\n      store.dispatch(fetchMessages(dialog.id, messages))\n      amountMessages = messages.length\n    } else {\n      // If the second entry into the chat\n      if (dialog.unread_messages_count > 0) {\n        const messages = this.getMessagesByDialogId(dialog.id)\n        const firstUnreadMsg = messages[dialog.unread_messages_count - 1]\n        this.readAllMessages(dialog.id)\n        await this.sendReadStatus(firstUnreadMsg.id, firstUnreadMsg.sender_id, firstUnreadMsg.dialog_id)\n        this.updateDialogsUnreadMessagesCount(dialog)\n      }\n      amountMessages = isAlredyUpdate.length\n    }\n    return amountMessages\n  }\n\n  // Message loading if more than 100\n  getMoreMessages = async (dialog) => {\n    const currentMessages = this.getMessagesByDialogId(dialog.id)\n    const lastMessageDate = currentMessages[0]\n    const updateObj = Object.assign(dialog, { last_messages_for_fetch: lastMessageDate.date_sent })\n\n    const filter = {\n      chat_dialog_id: dialog.id,\n      date_sent: { lt: lastMessageDate.date_sent },\n      sort_desc: 'date_sent'\n    }\n\n    const moreHistoryFromServer = await ConnectyCube.chat.message.list(filter)\n\n    const messages = []\n    moreHistoryFromServer.items.forEach(elem => {\n      if (!elem.group_chat_alert_type) {\n        messages.push(new Message(elem, this.currentUser.id))\n      }\n    })\n\n    store.dispatch(updateDialog(updateObj))\n    const amountMessages = store.dispatch(lazyFetchMessages(dialog.id, messages))\n    return amountMessages.history.length\n  }\n\n\n  async sendMessage(dialog, messageText, attachments = false, scrollToBottom) {\n    const user = this.currentUser\n    const text = messageText.trim()\n    const date = Math.floor(Date.now() / 1000)\n    const recipient_id = dialog.type === DIALOG_TYPE.PRIVATE ? dialog.occupants_ids.find(elem => elem != user.id)\n      : dialog.xmpp_room_jid\n\n    let msg = {\n      type: dialog.xmpp_type,\n      body: text,\n      extension: {\n        save_to_history: 1,\n        dialog_id: dialog.id,\n        sender_id: user.id,\n        date_sent: date,\n      },\n      // markable: 1\n    }\n\n    msg.id = this.messageUniqueId\n\n    // If send message as Attachment\n    if (attachments) {\n      return this.sendMessageAsAttachment(dialog, recipient_id, msg, attachments, scrollToBottom)\n    }\n\n    const message = new FakeMessage(msg)\n\n    const newObjFreez = Object.freeze(message)\n\n    await store.dispatch(pushMessage(newObjFreez, dialog.id))\n    scrollToBottom()\n    ConnectyCube.chat.send(recipient_id, msg)\n    store.dispatch(sortDialogs(newObjFreez))\n  }\n\n\n  sendMsgChatAlertOnCreate = async (dialog, message, alertType) => {\n    const date = Math.floor(Date.now() / 1000)\n    const recipient_id = dialog.type === DIALOG_TYPE.PRIVATE ? dialog.occupants_ids.find(elem => elem != this.currentUser.id)\n      : dialog.xmpp_room_jid\n    const messageExtensions = {\n      date_sent: date,\n      save_to_history: 1,\n      dialog_id: dialog.id,\n      group_chat_alert_type: alertType,\n      sender_id: this.currentUser.id,\n    }\n    const msg = {\n      type: !dialog.xmpp_room_jid ? 'chat' : 'groupchat',\n      body: message,\n      extension: messageExtensions,\n    }\n    ConnectyCube.chat.send(recipient_id, msg)\n  }\n\n  sendChatAlertOnCreate(dialog) {\n    const message = 'Group is created'\n    this.sendMsgChatAlertOnCreate(dialog, message, GROUP_CHAT_ALERT_TYPE.CREATE)\n  }\n\n  async sendMessageAsAttachment(dialog, recipient_id, msg, attachments, scrollToBottom) {\n    //create fake data for render img\n    const url = URL.createObjectURL(attachments.file)\n    msg.extension.attachments = [{ url }]\n    msg.body = 'Image attachment'\n    const message = new FakeMessage(msg)\n    await store.dispatch(pushMessage(message, dialog.id))\n    scrollToBottom()\n\n    // create real data for attachment\n    const response = await this.uploadPhoto(attachments)\n    const newObjAttach = preparationAttachment(response)\n    msg.extension.attachments = [newObjAttach]\n    await ConnectyCube.chat.send(recipient_id, msg)\n    store.dispatch(sortDialogs(message))\n    return\n  }\n\n  async createPrivateDialog(userId) {\n    const dialogs = store.getState().dialogs\n    let dialog = null\n\n    dialogs.forEach(elem => {\n      if (elem.type === DIALOG_TYPE.PRIVATE && elem.occupants_ids.find(elem => elem === userId)) {\n        dialog = elem\n      }\n    })\n\n    if (!dialog) {\n      const params = {\n        type: DIALOG_TYPE.PRIVATE,\n        occupants_ids: userId,\n      }\n\n      const response = await ConnectyCube.chat.dialog.create(params)\n      dialog = new Dialog(response)\n      if (this.getUserFromReduxById(userId)) {\n        store.dispatch(addNewDialog(dialog))\n        return dialog\n      } else {\n        const usersInfo = await this.getUserFromServerById(userId)\n        usersInfo.user = new UserModel(usersInfo.user)\n        store.dispatch(fetchUsers([usersInfo.user]))\n        store.dispatch(addNewDialog(dialog))\n        return dialog\n      }\n    }\n\n    // If the user is already in the Redux\n    if (this.getUserFromReduxById(userId)) {\n      return dialog\n    } else {\n      const usersInfo = await this.getUserFromServerById(userId)\n      usersInfo.user = new UserModel(usersInfo.user)\n      store.dispatch(fetchUsers([usersInfo.user]))\n      return dialog\n    }\n  }\n\n\n  updateDialogsUnreadMessagesCount = (dialog) => {\n    const updateObj = Object.assign(dialog, { unread_messages_count: 0 })\n    store.dispatch(updateDialog(updateObj))\n    return true\n  }\n\n  async createPublicDialog(occupants_ids, groupName, img) {\n    const currentUser = this.currentUser\n    occupants_ids.unshift(currentUser.id)\n    const params = {\n      type: DIALOG_TYPE.GROUP,\n      occupants_ids,\n      name: groupName,\n    }\n    const image = img ? await this.uploadPhoto(img) : null\n    if (image) {\n      params.photo = image.uid\n    }\n    const dialog = await ConnectyCube.chat.dialog.create(params)\n    const newDialog = new Dialog(dialog)\n    store.dispatch(addNewDialog(newDialog))\n    return newDialog\n  }\n\n  async readAllMessages(dialogId) {\n    return ConnectyCube.chat.message.update(null, {\n      chat_dialog_id: dialogId,\n      read: 1\n    })\n  }\n\n  async readMessage(messageId, dialogId) {\n    this.onReadStatus(messageId, dialogId)\n    return ConnectyCube.chat.message.update(null, {\n      chat_dialog_id: dialogId,\n      read: 1\n    })\n  }\n\n  async onMessageListener(senderId, msg) {\n    const message = new Message(msg)\n    const user = this.currentUser\n    const dialog = this.getSelectedDialog()?.id\n\n    // If group chat alet\n    if (msg.extension.group_chat_alert_type) {\n      const dialogsFromServer = await ConnectyCube.chat.dialog.list()\n      const dialogs = dialogsFromServer.items.map(elem => {\n        return new Dialog(elem)\n      })\n      store.dispatch(fetchDialogs(dialogs))\n      return\n    }\n\n    if (senderId !== user.id) {\n      if (dialog === message.dialog_id) {\n        store.dispatch(sortDialogs(message))\n        this.readMessage(message.id, message.dialog_id)\n        this.sendReadStatus(msg.extension.message_id, msg.extension.sender_id, msg.dialog_id)\n      } else {\n        this.sendDeliveredStatus(msg.extension.message_id, msg.extension.sender_id, msg.dialog_id)\n        store.dispatch(sortDialogs(message, true))\n      }\n      store.dispatch(pushMessage(message, message.dialog_id))\n    }\n  }\n\n  // ConnectyCube listeners\n  onSentMessageListener(failedMessage, msg) {\n    console.warn('onSentMessageListener')\n    if (failedMessage || msg.extension.group_chat_alert_type) {\n      return\n    }\n    store.dispatch(updateMessages(msg.extension.dialog_id, msg.id, { send_state: STATUS_SENT }))\n  }\n\n  onDeliveredStatus(messageId, dialogId, userId) {\n    console.warn('onDeliveredStatus', messageId)\n    store.dispatch(updateMessages(dialogId, messageId, { send_state: STATUS_DELIVERED }))\n  }\n\n  onReadStatus(messageId, dialogId, userId) {\n    console.warn('onReadStatus', messageId)\n    store.dispatch(updateMessages(dialogId, messageId, { send_state: STATUS_READ }))\n  }\n\n\n\n  sendReadStatus(messageId, userId, dialogId) {\n    ConnectyCube.chat.sendReadStatus({ messageId, userId, dialogId })\n  }\n\n  sendDeliveredStatus(messageId, userId, dialogId) {\n    ConnectyCube.chat.sendDeliveredStatus({ messageId, userId, dialogId })\n  }\n\n  async getUsersList(ids) {\n    const usersList = await ConnectyCube.users.get({\n      per_page: 100,\n      filter: {\n        field: 'id', param: 'in', value: ids,\n      },\n    })\n\n    return usersList.items.map(elem => {\n      return new UserModel(elem.user)\n    })\n  }\n\n  async getUserFromServerById(id) {\n    return ConnectyCube.users.get(id)\n  }\n\n  setSelectDialog(dialog) {\n    store.dispatch(selectedDialog(dialog))\n  }\n\n  getSelectedDialog() {\n    return store.getState().selectedDialog\n  }\n\n  getDialogById(dialogId) {\n    return store.getState().dialogs.find(elem => elem.id === dialogId)\n  }\n\n  getMessagesByDialogId(dialogId) {\n    const result = store.getState().messages\n    return result[dialogId]\n  }\n\n  async uploadPhoto(file) {\n    return ConnectyCube.storage.createAndUpload(file)\n  }\n\n  get currentUser() {\n    return store.getState().currentUser.user\n  }\n\n  getUserFromReduxById(id) {\n    return store.getState().users[id]\n  }\n\n  get messageUniqueId() {\n    return ConnectyCube.chat.helpers.getBsonObjectId()\n  }\n}\n\n\nconst chatService = new ChatService()\n\nObject.freeze(chatService)\n\nexport default chatService\n\n","import ConnectyCube from 'connectycube'\nimport appConfig from '../appConfig.json'\nimport User from '../models/user'\nimport store from '../store'\nimport { setCurrentUser } from '../actions/currentUser'\nimport { getImageLinkFromUID } from '../helpers/file'\nimport { LogOut } from '../reducers/index'\n\nclass AuthService {\n  static CURRENT_USER_SESSION_KEY = 'CURRENT_USER_SESSION_KEY'\n  static DEVICE_TOKEN_KEY = 'DEVICE_TOKEN_KEY'\n\n  async init() {\n    await ConnectyCube.init(...appConfig.connectyCubeConfig)\n    return this.autologin()\n  }\n\n  async autologin() {\n    const checkUserSessionFromStore = await this.getUserSession()\n    if (checkUserSessionFromStore) {\n      const data = JSON.parse(checkUserSessionFromStore)\n      await this.signIn({ login: data.login, password: data.password })\n      return 'home'\n    } else { return 'auth' }\n  }\n\n  async signIn(params) {\n    const session = await ConnectyCube.createSession(params)\n    const currentUser = new User(session.user)\n    session.user.avatar = getImageLinkFromUID(session.user.avatar)\n    // work around\n    session.user.full_name = session.user.login\n    store.dispatch(setCurrentUser(session))\n    const customSession = Object.assign({}, currentUser, { password: params.password })\n    this.setUserSession(customSession)\n    this.connect(customSession.id, customSession.password)\n  }\n\n  async signUp(params) {\n    await ConnectyCube.createSession()\n    await ConnectyCube.users.signup(params)\n    return this.signIn(params)\n  }\n\n  async connect(userId, password) {\n    await ConnectyCube.chat.connect({ userId, password })\n  }\n\n  setUserSession(userSession) {\n    return localStorage.setItem(AuthService.CURRENT_USER_SESSION_KEY, JSON.stringify(userSession))\n  }\n\n  getUserSession() {\n    return localStorage.getItem(AuthService.CURRENT_USER_SESSION_KEY)\n  }\n\n  async logout() {\n    localStorage.clear()\n    await ConnectyCube.logout()\n    store.dispatch(LogOut())\n  }\n\n\n}\n\nconst authService = new AuthService()\n\nObject.freeze(authService)\n\nexport default authService","export default __webpack_public_path__ + \"static/media/logo_with_text.a95d1c0f.png\";","import React, { Component } from 'react'\nimport './loader.css'\n\nexport default class Loader extends Component {\n  render() {\n    return (\n      <div className=\"container-loader\">\n        <div className=\"loader\"></div>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport AuthService from '../../services/auth-service'\nimport logo from '../../assets/logo_with_text.png'\nimport swal from 'sweetalert'\nimport './auth.css'\nimport Loader from '../../helpers/loader/loader'\nimport { Redirect } from \"react-router-dom\"\n\n\nexport default class Auth extends Component {\n  state = {\n    isLogin: true,\n    isLoader: false,\n    full_name: '',\n    login: '',\n    password: '',\n    isAuthorization: false\n  }\n\n  handleStateModal = () => {\n    return this.setState(\n      { isLogin: !this.state.isLogin }\n    )\n  }\n\n  changeName = (event) => (this.setState({ full_name: event.target.value }))\n\n  changeLogin = (event) => (this.setState({ login: event.target.value }))\n\n  changePassword = (event) => (this.setState({ password: event.target.value }))\n\n  login = (e) => {\n    e.preventDefault()\n    const { login, password, full_name, isLogin } = this.state\n    const dataUser = { login, password }\n\n    if (!login.trim() || !password.trim() || !isLogin && !full_name.trim()) {\n      const endMessage = isLogin ? 'login.' : 'sign up'\n      swal('Warning', `Fill the fields to ${endMessage}`)\n      return\n    }\n\n    this.setState({ isLoader: true })\n\n    if (isLogin) {\n      AuthService.signIn(dataUser)\n        .then(() => {\n          this.setState({ isLoader: false, isAuthorization: true })\n        })\n        .catch(error => {\n          this.setState({ isLoader: false })\n          swal(`Error.\\n\\n${JSON.stringify(error)}`, \"\", \"error\")\n        })\n    } else {\n      dataUser.full_name = full_name\n      AuthService.signUp(dataUser)\n        .then(() => {\n          this.setState({ isLoader: false, isAuthorization: true })\n          swal(\"Account successfully registered!\", \"\", \"success\")\n        })\n        .catch(error => {\n          this.setState({ isLoader: false })\n          swal(`Error.\\n\\n${JSON.stringify(error)}`, \"\", \"error\")\n        }\n        )\n    }\n\n  }\n\n  render() {\n    const { isLogin, login, password, isLoader, isAuthorization, full_name } = this.state\n    const authText = isLogin ? \"Don't have an account?\" : 'Already have an account?'\n    const authLink = isLogin ? 'Sign up' : 'Sign in'\n\n    return (\n      <div className=\"auth-main-сontainer\" style={this.props.isSmallDevice && { backgroundColor: '#27ae60' }}>\n        <div className=\"auth-modal-container\" style={isLogin ? { height: '500px' } : { height: '570px' }}>\n          {isLoader &&\n            <div className=\"auth-wrapp-loader\">\n              <Loader />\n            </div>\n          }\n          {isAuthorization &&\n            <Redirect to=\"/home\" />\n          }\n          <div className=\"auth-logo\">\n            <img src={logo} alt=\"Logo\" />\n          </div>\n          <form onSubmit={this.login} className=\"auth-form auth-wrapper\">\n            {!isLogin &&\n              <input\n                type=\"text\"\n                value={full_name}\n                onChange={this.changeName}\n                required\n                placeholder=\"Name\"\n                name=\"Name\"\n              />\n            }\n            <input\n              type=\"text\"\n              value={login}\n              onChange={this.changeLogin}\n              required\n              placeholder=\"Login\"\n              name=\"login\" />\n            <input\n              type=\"password\"\n              value={password}\n              onChange={this.changePassword}\n              required\n              placeholder=\"Password\"\n              name=\"Password\" />\n            <button type=\"submit\" value=\"Submit\">{isLogin ? 'Log in' : 'Sign up'}</button>\n          </form>\n          <div className=\"auth-footer\">\n            <span>{authText}</span>\n            {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\n            <a onClick={this.handleStateModal}>{authLink}</a>\n          </div>\n        </div>\n      </div >\n    )\n  }\n}\n\n","import React from 'react'\nimport './avatar.css'\n\nexport default function Avatar({ photo, name, size }) {\n  function randomizeColor() {\n    const colors = [\n      'blue',\n      'darkmagenta',\n      'fuchsia',\n      'gold',\n      'green',\n      'limegreen',\n      'navy',\n      'purple',\n      'red',\n      'skyblue'\n    ]\n\n    return colors[name.length % colors.length]\n  }\n\n  function getIconLabel() {\n    const words = name.split(' ')\n    return words.length > 1\n      ? `${words[0].slice(0, 1)}${words[1].slice(0, 1)}`\n      : name.slice(0, 2)\n  }\n\n  return (\n    photo ?\n      <div style={{ width: size, height: size }}>\n        <div style={{\n          width: size || '100%',\n          height: size || '100%',\n          borderRadius: '50%',\n          backgroundImage: `url(${photo})`,\n          backgroundPosition: 'center',\n          backgroundSize: 'cover',\n          backgroundRepeat: 'no-repeat'\n        }}>\n        </div>\n      </div> :\n      <div style={{ width: size, height: size }}>\n        <div className=\"avatar-as-icon\" style={{ backgroundColor: randomizeColor() }}>\n          <p style={{ fontSize: size / 2.4 }}>{getIconLabel().toUpperCase()}</p>\n        </div>\n      </div >\n  )\n}\n","import React, { Component } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\nimport { faChevronUp } from '@fortawesome/free-solid-svg-icons'\nimport { connect } from 'react-redux'\nimport './userProfile.css'\nimport AuthService from '../../../../services/auth-service'\nimport Modal from 'react-modal'\nimport { Link } from \"react-router-dom\"\nimport Avatar from '../../../../helpers/avatar/avatar'\n\n\nclass UserProfile extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isModal: false\n    }\n  }\n\n  customStyles = {\n    content: {\n      top: '50%',\n      left: '50%',\n      right: 'auto',\n      bottom: 'auto',\n      transform: 'translate(-50%, -50%)',\n      border: 'none',\n      padding: 0,\n    }\n  }\n\n  showMoreInformation = () => {\n    this.setState({ isModal: !this.state.isModal })\n  }\n\n  handleCloseModal = () => (this.setState({ isModal: false }))\n\n  logOut = () => {\n    AuthService.logout()\n  }\n\n  settings = () => {\n    alert(\"Coming soon\")\n    this.handleCloseModal()\n  }\n\n  render() {\n    const { isModal } = this.state\n    const { currentUser } = this.props\n    if (!currentUser) {\n      return <></>\n    }\n\n    const { user } = currentUser\n    return (\n      <div className=\"user-rofile-container\">\n        <div className=\"user-profile-wrapper\">\n          <div className=\"user-profile-user-info\">\n            <div className=\"online\">\n              <Avatar photo={user.avatar} name={user.full_name} size={50} />\n            </div>\n            <span>{user.full_name}</span>\n          </div>\n          <div className=\"user-profile-icon\" id=\"user-profile-icon\" onClick={this.showMoreInformation}>\n            {isModal ?\n              <FontAwesomeIcon icon={faChevronUp} color={'white'} /> :\n              <FontAwesomeIcon icon={faChevronDown} color={'#435f7a'} />\n            }\n          </div>\n        </div>\n        {isModal &&\n          <>\n            <Modal\n              isOpen={isModal}\n              onRequestClose={this.handleCloseModal}\n              ariaHideApp={false}\n              style={this.customStyles}\n              overlayClassName=\"Overlay-user-profile\"\n            />\n            <div className=\"user-profile-modal\">\n              <ul>\n                <li className=\"user-profile-user-more-info\">\n                  <Link\n                    to=\"/auth\"\n                    onClick={this.logOut}\n                    className=\"reset-user-profile\">Logout</Link>\n                </li>\n                <li className=\"user-profile-user-more-info\">\n                  <Link\n                    to=\"/home\"\n                    onClick={this.settings}\n                    className=\"reset-user-profile\">Settings</Link>\n                </li>\n              </ul>\n            </div>\n          </>\n        }\n      </div>\n    )\n  }\n}\n\n\nconst mapStateToProps = ({ currentUser }) => ({\n  currentUser\n})\n\nexport default connect(mapStateToProps)(UserProfile)\n","import { LayoutProvider } from \"recyclerlistview/web\"\nimport store from '../store'\n\nexport class DialogLayoutUtil {\n  static getDialogLayoutProvider(width) {\n    return new LayoutProvider(\n      () => {\n        return \"type\";\n      },\n      (type, dim) => {\n        dim.width = width;\n        dim.height = 75;\n      }\n    );\n  }\n}\n\n\nexport class ChatLayoutUtil {\n  static getChatLayoutProvider(props) {\n    const { width, dialogId, currentUserId } = props\n    const fontSize = 16\n    const lineHeight = 1.5\n    const delta = 20\n    const margin = 30\n    const maxWidth = new GetMaxWidthMsg(width)\n    let footer = 15\n\n    return new LayoutProvider(\n      (arr) => {\n        return arr;\n      },\n      (type, dim, index) => {\n        if (store.getState().messages[dialogId][index].attachment) {\n          // if send messages as attachment\n          dim.width = width\n          dim.height = 300\n          return\n        } else {\n          // if send messages as string\n          let maxWidthMsg\n          if (store.getState().messages[dialogId][index].sender_id === currentUserId) {\n            maxWidthMsg = maxWidth.currentSender\n          } else {\n            maxWidthMsg = maxWidth.otherSender\n          }\n\n          var fakeElem = document.createElement(\"canvas\")\n          var ctx = fakeElem.getContext(\"2d\")\n          ctx.font = `${fontSize}px 'Open Sans', sans-serif`\n          var txt = store.getState().messages[dialogId][index].body\n\n          const calcWidth = ctx.measureText(txt).width\n          const lines = Math.ceil(calcWidth / (maxWidthMsg - delta))\n\n          dim.width = width\n          dim.height = lines * lineHeight * fontSize + margin + footer\n        }\n      }\n    )\n  }\n}\n\nexport class GetMaxWidthMsg {\n  constructor(maxScrollWidth) {\n    if (maxScrollWidth < 550) {\n      this.currentSender = 300\n      this.otherSender = 250\n    }\n    if (maxScrollWidth > 550 && maxScrollWidth < 768) {\n      this.currentSender = 420\n      this.otherSender = 470\n    }\n    if (maxScrollWidth > 768 && maxScrollWidth < 960) {\n      this.currentSender = 450\n      this.otherSender = 500\n    }\n    if (maxScrollWidth > 960) {\n      this.currentSender = 650\n      this.otherSender = 600\n    }\n  }\n}","export default function lastDate({ lastDate, lastMessage, updatedDate }) {\n  const monthes = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n  const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n  const msgLastDate = lastMessage ? new Date(lastDate * 1000) : new Date(updatedDate)\n  const msgYear = msgLastDate.getFullYear()\n  const msgMonth = msgLastDate.getMonth()\n  const msgDate = msgLastDate.getDate()\n  const msgDay = msgLastDate.getDay()\n  const msgHours = msgLastDate.getHours()\n  const msgMinutes = msgLastDate.getMinutes()\n  const LastDate = new Date()\n  const curYear = LastDate.getFullYear()\n  const curMonth = LastDate.getMonth()\n  const curDate = LastDate.getDate()\n  const curDay = LastDate.getDay()\n\n  if (curYear > msgYear) {\n    return `${monthes[msgMonth]} ${msgDate}, ${msgYear}`\n  } else if (curMonth > msgMonth) {\n    return `${monthes[msgMonth]} ${msgDate}`\n  } else if (curDate > (msgDate + 6)) {\n    return `${monthes[msgMonth]} ${msgDate}`\n  } else if (curDay > msgDay) {\n    return `${days[msgDay]}`\n  } else {\n    return `${(msgHours > 9) ? msgHours : ('0' + msgHours)}:${(msgMinutes > 9) ? msgMinutes : ('0' + msgMinutes)}`\n  }\n}\n\nexport function getTime(dateSent) {\n  const date = dateSent ? new Date(dateSent * 1000) : new Date()\n  const hours = date.getHours()\n  const minutes = date.getMinutes()\n  return `${(hours > 9) ? hours : ('0' + hours)}:${(minutes > 9) ? minutes : ('0' + minutes)}`\n}","import React, { Component } from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUserPlus } from '@fortawesome/free-solid-svg-icons'\nimport { faSearch } from '@fortawesome/free-solid-svg-icons'\nimport { RecyclerListView, DataProvider } from \"recyclerlistview/web\"\nimport { connect } from 'react-redux'\nimport { DialogLayoutUtil } from '../../../../helpers/LayoutUtil'\nimport ChatService from '../../../../services/chat-service'\nimport Loader from '../../../../helpers/loader/loader'\nimport lastDate from '../../../../helpers/lastDate'\nimport Avatar from '../../../../helpers/avatar/avatar'\nimport './dialogs.css'\n\n\nclass Dialog extends Component {\n  scrollWidth = 0\n  scrollHeight = 0\n  listenerWindowSize = null\n  timer = null\n  allDialog = []\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      isAlredy: false,\n      dataProvider: new DataProvider((r1, r2) => {\n        return r1 !== r2 || r1.unread_messages_count !== r2.unread_messages_count;\n      }),\n      layoutProvider: 0,\n      count: 20,\n      isLoader: true,\n      search: ''\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.handleResize)\n    this.scrollWidth = document.getElementById('dialog-info-container').clientWidth\n    this.scrollHeight = document.getElementById('dialog-info-container').clientHeight\n\n    ChatService.fetchDialogsFromServer().then((dialogs) => {\n      this.allDialog = dialogs\n      this.setState({\n        isAlredy: true,\n        isLoader: false,\n        layoutProvider: DialogLayoutUtil.getDialogLayoutProvider(this.scrollWidth),\n        dataProvider: this.state.dataProvider.cloneWithRows(dialogs),\n      })\n    })\n  }\n\n  componentDidUpdate(prevProps) {\n    const { dialogs } = this.props\n    if (this.props.dialogs !== prevProps.dialogs\n    ) {\n      this.allDialog = dialogs\n      this.setState({\n        layoutProvider: DialogLayoutUtil.getDialogLayoutProvider(this.scrollWidth),\n        dataProvider: this.state.dataProvider.cloneWithRows(dialogs),\n      })\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize)\n  }\n\n  handleResize = () => {\n    this.scrollWidth = document.getElementById('dialog-info-container').clientWidth\n    this.scrollHeight = document.getElementById('dialog-info-container').clientHeight\n    if (!this.timer) {\n      this.timer = setTimeout(() => {\n        clearTimeout(this.timer)\n        this.timer = null\n        this.setState({\n          isAlredy: true,\n          layoutProvider: DialogLayoutUtil.getDialogLayoutProvider(this.scrollWidth)\n        })\n      }, 500)\n    }\n  }\n\n  changeSearch = (event) => {\n    let dialogs = []\n    if (event.target.value === '') {\n      dialogs = this.allDialog\n    } else {\n      this.allDialog.forEach(elem => {\n        const str = elem.name.toUpperCase().includes(event.target.value.toUpperCase())\n        str && dialogs.push(elem)\n      })\n    }\n    this.setState({\n      search: event.target.value,\n      dataProvider: this.state.dataProvider.cloneWithRows(dialogs)\n    })\n  }\n\n  goToChat = (item) => {\n    const { router } = this.props\n    ChatService.setSelectDialog(item)\n    router('/home/chat')\n  }\n\n  createNewDialog = () => {\n    const { router } = this.props\n    router('/home/create-dialog')\n  }\n\n  _renderDialog = (type, item) => {\n    return (\n      <li onClick={() => this.goToChat(item)}>\n        <div className=\"dialog-wrap-avatar\">\n          <Avatar photo={item.photo} name={item.name} size={50} />\n        </div>\n        <div className=\"dialog-wrap-block\">\n          <div className=\"dialog-wrap-block-left\">\n            <h5>{item.name}</h5>\n            <span>{item.last_message === '' ? \"No messages yet\" : item.last_message}</span>\n          </div>\n          <div className=\"dialog-wrap-block-right\">\n            <p>{lastDate({\n              lastDate: item.last_message_date_sent,\n              lastMessage: item.last_message,\n              updatedDate: item.updated_date,\n            })}</p>\n            {item.unread_messages_count > 0 &&\n              <span>{item.unread_messages_count}</span>\n            }\n          </div>\n        </div>\n      </li>\n    )\n  }\n\n  render() {\n    const { isLoader, dataProvider, layoutProvider, search } = this.state\n    return (\n      <div className=\"dialog-container\" >\n        <button onClick={this.createNewDialog}>\n          <FontAwesomeIcon icon={faUserPlus} color={'#d2d2d2'} />\n          <span>New chat</span>\n        </button>\n        <div className=\"dialog-input-search\">\n          <div className=\"dialog-input-search-icon\">\n            <FontAwesomeIcon icon={faSearch} color={'#d2d2d2'} />\n          </div>\n          <input\n            className=\"input-field\"\n            type=\"text\"\n            value={search}\n            onChange={this.changeSearch}\n            required\n            placeholder=\"Search chats...\"\n            name=\"search\" />\n        </div>\n        <div className=\"dialog-info-container\" id=\"dialog-info-container\">\n          {isLoader ?\n            (\n              <div style={{ position: 'absolute', width: '100%', height: '100%' }}>\n                <Loader />\n              </div>\n            ) : dataProvider.length === 0 ?\n              <div className=\"dialog-no-chats\">\n                <h3>No chats yet</h3>\n              </div> : this.state.isAlredy ?\n                dataProvider._data.length > 0 ?\n                  <ul>\n                    {\n                      <RecyclerListView\n                        style={{ width: this.scrollWidth, height: this.scrollHeight }}\n                        dataProvider={dataProvider}\n                        layoutProvider={layoutProvider}\n                        rowRenderer={this._renderDialog}\n                      />\n                    }\n                  </ul> : <div className=\"dialog-no-chats\">\n                    <h3>No results</h3>\n                  </div> : null\n          }\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = ({ dialogs }) => ({\n  dialogs\n})\n\nexport default connect(mapStateToProps)(Dialog)","import React, { Component } from 'react'\nimport UserProfile from './userProfile/userProfile'\nimport Dialogs from './dialogs/dialogs'\nimport './sideBar.css'\n\nexport default class SideBar extends Component {\n  render() {\n    const { router } = this.props\n    return (\n      <div className=\"sidebar-container\">\n        <UserProfile />\n        <Dialogs router={router} />\n      </div>\n    )\n  }\n}\n\n","const createImage = url =>\n  new Promise((resolve, reject) => {\n    const image = new Image()\n    image.addEventListener('load', () => resolve(image))\n    image.addEventListener('error', error => reject(error))\n    image.setAttribute('crossOrigin', 'anonymous') // needed to avoid cross-origin issues on CodeSandbox\n    image.src = url\n  })\n\nfunction getRadianAngle(degreeValue) {\n  return (degreeValue * Math.PI) / 180\n}\n\n/**\n * This function was adapted from the one in the ReadMe of https://github.com/DominicTobias/react-image-crop\n * @param {File} image - Image File url\n * @param {Object} pixelCrop - pixelCrop Object provided by react-easy-crop\n * @param {number} rotation - optional rotation parameter\n */\nexport default async function getCroppedImg(imageSrc, pixelCrop, rotation = 0) {\n  const image = await createImage(imageSrc)\n  const canvas = document.createElement('canvas')\n  const ctx = canvas.getContext('2d')\n\n  const maxSize = Math.max(image.width, image.height)\n  const safeArea = 2 * ((maxSize / 2) * Math.sqrt(2))\n\n  // set each dimensions to double largest dimension to allow for a safe area for the\n  // image to rotate in without being clipped by canvas context\n  canvas.width = safeArea\n  canvas.height = safeArea\n\n  // translate canvas context to a central location on image to allow rotating around the center.\n  ctx.translate(safeArea / 2, safeArea / 2)\n  ctx.rotate(getRadianAngle(rotation))\n  ctx.translate(-safeArea / 2, -safeArea / 2)\n\n  // draw rotated image and store data.\n  ctx.drawImage(\n    image,\n    safeArea / 2 - image.width * 0.5,\n    safeArea / 2 - image.height * 0.5\n  )\n  const data = ctx.getImageData(0, 0, safeArea, safeArea)\n\n  // set canvas width to final desired crop size - this will clear existing context\n\n  // canvas.width = pixelCrop.width\n  // canvas.height = pixelCrop.height\n\n  // custom width and height\n  canvas.width = 400\n  canvas.height = 400\n\n\n  // paste generated rotate image with correct offsets for x,y crop values.\n  ctx.putImageData(\n    data,\n    0 - safeArea / 2 + image.width * 0.5 - pixelCrop.x,\n    0 - safeArea / 2 + image.height * 0.5 - pixelCrop.y\n  )\n\n  // As Base64 string\n  // return canvas.toDataURL('image/jpeg');\n\n\n  return new Promise(resolve => {\n    canvas.toBlob(file => {\n      const newFile = new File([file], \"filename.jpg\", { type: 'image/jpeg' })\n      const imageInfo = {\n        file: {\n          size: file.size,\n          type: file.type,\n          file: newFile,\n          name: 'samo-name.jpg',\n          public: false\n        },\n        link: {\n          url: URL.createObjectURL(file)\n        }\n      }\n      resolve(imageInfo)\n    }, 'image/jpeg')\n  })\n}\n","import React, { Component } from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCamera } from '@fortawesome/free-solid-svg-icons'\nimport { faPaperclip } from '@fortawesome/free-solid-svg-icons'\nimport Modal from 'react-modal'\nimport Cropper from 'react-easy-crop'\nimport getCroppedImg from './cropImage'\nimport './imagePicker.css'\n\nconst customStyles = {\n  content: {\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    transform: 'translate(-50%, -50%)',\n    border: 'none',\n    padding: 0,\n    boxShadow: '2px 2px 25px 0px black'\n  }\n}\n\nexport default class ImagePicker extends Component {\n  croppedAreaPixels = null\n  cropedImage = null\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      image: '',\n      imageSrc: '',\n      crop: { x: 0, y: 0 },\n      zoom: 1,\n      isModal: false\n    }\n  }\n\n  onCropChange = crop => {\n    this.setState({ crop })\n  }\n\n  onCropComplete = (croppedArea, croppedAreaPixels) => {\n    this.croppedAreaPixels = croppedAreaPixels\n  }\n\n  cropImage = async () => {\n    this.cropedImage = await getCroppedImg(this.state.imageSrc, this.croppedAreaPixels)\n    this.props.getImage(this.cropedImage.file)\n    this.handleCloseModal()\n  }\n\n  onZoomChange = zoom => {\n    this.setState({ zoom })\n  }\n\n  handleCloseModal = () => (this.setState({ isModal: false }))\n\n  handleOpenModal = () => (this.setState({ isModal: true }))\n\n  onImageChange = (event) => {\n    if (event.target.files && event.target.files[0]) {\n      this.setState({\n        imageSrc: URL.createObjectURL(event.target.files[0]),\n        isModal: true\n      })\n    }\n  }\n\n  _renderAvatarPicker = () => {\n    return (\n      <>\n        <div className=\"image-picker\">\n          <label htmlFor=\"file-upload\" className=\"custom-file-upload\" >\n            {this.cropedImage ?\n              <img src={this.cropedImage?.link.url} alt=\"groupPhoto\" style={{ width: 60, height: 60, borderRadius: '50%' }} /> :\n              <FontAwesomeIcon icon={faCamera} color={'black'} />\n            }\n          </label>\n          <input id=\"file-upload\" type=\"file\" onChange={this.onImageChange} />\n        </div>\n      </>\n    )\n  }\n\n  _renderAttachmentPicker = () => {\n    return (\n      <div className=\"image-picker-container\">\n        <label htmlFor=\"file-upload\" className=\"custom-file-upload-attachment\" >\n          <FontAwesomeIcon icon={faPaperclip} color={'#9aa8b5'} />\n        </label>\n        <input id=\"file-upload\" type=\"file\" onChange={this.onImageChange} />\n      </div>\n    )\n  }\n\n  render() {\n    const { pickAsAttachment } = this.props\n    const { isModal } = this.state\n    return (\n      <>\n        {pickAsAttachment ?\n          this._renderAttachmentPicker() :\n          this._renderAvatarPicker()\n        }\n        <Modal\n          isOpen={isModal}\n          onRequestClose={this.handleCloseModal}\n          ariaHideApp={false}\n          style={customStyles}\n          overlayClassName=\"Overlay\"\n        >\n          <>\n            <div className=\"image-crop-picker-header\">\n              <button onClick={this.cropImage}>Next</button>\n              <button onClick={this.handleCloseModal}>Cancel</button>\n            </div>\n            <div className=\"image-crop-picker-container\">\n              <Cropper\n                image={this.state.imageSrc}\n                crop={this.state.crop}\n                zoom={this.state.zoom}\n                cropSize={{ width: 300, height: 300 }}\n                onCropChange={this.onCropChange}\n                onCropComplete={this.onCropComplete}\n                onZoomChange={this.onZoomChange}\n              />\n            </div>\n          </>\n        </Modal>\n      </>\n\n    )\n  }\n\n}\n","import React, { PureComponent } from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPaperPlane } from '@fortawesome/free-solid-svg-icons'\nimport ImagePicker from '../../../../helpers/imagePicker/imagePicker'\nimport './chatInput.css'\n\nexport default class ChatInput extends PureComponent {\n  state = {\n    messageText: ''\n  }\n\n  changeMessage = event => (this.setState({ messageText: event.target.value }))\n\n  sendMessage = (e) => {\n    e.preventDefault()\n    this.props.sendMessageCallback(this.state.messageText)\n      .then(() => (this.setState({ messageText: '' })))\n      .catch(() => (this.setState({ messageText: '' })))\n  }\n\n  getImage = (image) => {\n    this.props.sendMessageCallback(this.state.messageText, image)\n      .then(() => (this.setState({ messageText: '' })))\n      .catch(() => (this.setState({ messageText: '' })))\n  }\n\n  render() {\n    const { messageText } = this.state\n    return (\n      <footer>\n        <form onSubmit={this.sendMessage}>\n          <input\n            type=\"text\"\n            value={messageText}\n            onChange={this.changeMessage}\n            placeholder=\"Write your message...\"\n            name=\"search\" />\n          <div className=\"chat-attachment\">\n            <ImagePicker pickAsAttachment getImage={this.getImage} />\n          </div>\n          <button onClick={this.sendMessage}>\n            <FontAwesomeIcon icon={faPaperPlane} color={'white'} />\n          </button>\n        </form>\n      </footer>\n    );\n  }\n}\n","import ConnectyCube from 'connectycube'\nimport UserModel from '../models/user'\nimport store from '../store'\nimport { fetchUsers } from '../actions/users'\n\nclass UsersService {\n\n  async getUserById(id) {\n    ConnectyCube.users.get(id)\n  }\n\n  async getOccupants(ids) {\n    const users = this.getUsers\n    const currentUser = this.currentUser\n    let idsForFetch = []\n\n    // 140 system ID when a group is created through the admin panel\n    ids.forEach(elem => {\n      if (elem !== currentUser.id && !users[elem] && elem !== 140) {\n        idsForFetch.push(elem)\n      }\n    })\n    if (idsForFetch.length === 0) { return }\n    const usersFromServer = await ConnectyCube.users.get({\n      per_page: 100,\n      filter: {\n        field: 'id',\n        param: 'in',\n        value: idsForFetch,\n      },\n    })\n    const newUsers = usersFromServer.items.map(elem => {\n      return new UserModel(elem.user)\n    })\n    store.dispatch(fetchUsers(newUsers))\n  }\n\n\n  getUsersAvatar(ids) {\n    const currentUserId = this.currentUser\n    let userId = null\n    ids.forEach(elem => {\n      if (elem !== currentUserId.id) {\n        userId = elem\n      }\n    })\n    return store.getState().users[userId].avatar\n  }\n\n  async listUsersByFullName(name, usersIdsToIgnore = []) {\n    if (!usersIdsToIgnore) {\n      usersIdsToIgnore = [this.currentUser.id]\n    }\n    const allUsers = await ConnectyCube.users.get({ per_page: 100, full_name: name })\n    let contacts = []\n    allUsers.items.forEach(elem => {\n      if (!usersIdsToIgnore.includes(elem.user.id)) {\n        contacts.push(new UserModel(elem.user))\n      }\n    })\n    return contacts\n  }\n\n  get currentUser() {\n    return store.getState().currentUser.user\n  }\n\n  get getUsers() {\n    return store.getState().users\n  }\n}\n\nconst User = new UsersService()\n\nObject.freeze(User)\n\nexport default User\n\n","import React from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faClock } from '@fortawesome/free-solid-svg-icons'\nimport { faCheck } from '@fortawesome/free-solid-svg-icons'\nimport { faCheckDouble } from '@fortawesome/free-solid-svg-icons'\n\nimport {\n  STATUS_DELIVERED,\n  STATUS_PENDING,\n  STATUS_READ,\n  STATUS_SENT\n} from '../../../../models/message'\n\nexport default function MessageSendState({ send_state }) {\n  switch (send_state) {\n    case STATUS_PENDING:\n      return (<FontAwesomeIcon icon={faClock} color={'grey'} />)\n    case STATUS_SENT:\n      return (<FontAwesomeIcon icon={faCheck} color={'grey'} />)\n    case STATUS_DELIVERED:\n      return (<FontAwesomeIcon icon={faCheckDouble} color={'grey'} />)\n    case STATUS_READ:\n      return (<FontAwesomeIcon icon={faCheckDouble} color={'#27ae60'} />)\n\n    default: return (<FontAwesomeIcon icon={faClock} color={'white'} />)\n  }\n}\n","import React, { Component } from 'react';\nimport { getTime } from '../../../../helpers/lastDate'\nimport Avatar from '../../../../helpers/avatar/avatar'\nimport { GetMaxWidthMsg } from '../../../../helpers/LayoutUtil'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimesCircle } from '@fortawesome/free-solid-svg-icons'\nimport MessageSendState from './messageStatus'\nimport Modal from 'react-modal'\nimport './message.css'\n\nexport default class Message extends Component {\n  // 1 - current & 2 - other\n  constructor(props) {\n    super(props)\n    this.state = {\n      isModal: false\n    }\n  }\n\n  selectedImg = null\n\n  customStyles = {\n    content: {\n      top: '50%',\n      left: '50%',\n      right: 'auto',\n      bottom: 'auto',\n      transform: 'translate(-50%, -50%)',\n      border: 'none',\n      padding: 0,\n    }\n  }\n\n  _renderAsStr = (whoIsSender) => {\n    const { message } = this.props\n    if (whoIsSender === 1) {\n      return (\n        <>\n          <span style={{ wordWrap: 'break-word' }}>{message.body}</span>\n          <div className=\"chat-message-right-footer\">\n            <span>\n              <>\n                {getTime(message.date_sent)}\n              </>\n              <>\n                {<MessageSendState send_state={message.send_state} />}\n              </>\n            </span>\n          </div>\n        </>\n      )\n    } else {\n      return (\n        <>\n          <span style={{ wordWrap: 'break-word' }}>{message.body}</span>\n          <div className=\"chat-message-left-footer\">\n            <span>{getTime(message.date_sent)}</span>\n          </div>\n        </>\n      )\n    }\n  }\n\n  renderZoomImg = (event, message) => {\n    event.preventDefault()\n    this.selectedImg = message.attachment[0]\n    this.setState({ isModal: true })\n  }\n\n  handleCloseModal = () => this.setState({ isModal: false })\n\n  _renderAsAttachment = () => {\n    const { message, whoIsSender } = this.props\n    return (\n      <>\n        <div className=\"chat-message-container-attachment\">\n          <div style={{\n            backgroundImage: `url(${message.attachment[0].url})`,\n            backgroundPosition: 'center',\n            width: '100%',\n            height: '100%',\n            border: '1px solid #cbcbcb',\n            cursor: 'pointer'\n          }}\n            onClick={(e) => this.renderZoomImg(e, message)}\n          />\n        </div>\n        {whoIsSender === 1 ?\n          <div className=\"chat-message-right-footer\">\n            <span>\n              <>\n                {getTime(message.date_sent)}\n              </>\n              <>\n                {<MessageSendState send_state={message.send_state} />}\n              </>\n            </span>\n          </div> :\n          <div className=\"chat-message-left-footer\">\n            <span>{getTime(message.date_sent)}</span>\n          </div>\n        }\n      </>\n    )\n  }\n\n  render() {\n    const { message, whoIsSender, participantInfo, notRenderAvatar, widthScroll } = this.props\n    const { isModal } = this.state\n    const withMsg = new GetMaxWidthMsg(widthScroll)\n\n    return (\n      <>\n        {isModal &&\n          <Modal\n            isOpen={isModal}\n            onRequestClose={this.handleCloseModal}\n            ariaHideApp={false}\n            style={this.customStyles}\n            overlayClassName=\"overlay-chat-attachment\"\n          >\n            <div className=\"active-window-modal-attachment\">\n              <FontAwesomeIcon icon={faTimesCircle} color={'white'} onClick={this.handleCloseModal} />\n              <img\n                src={this.selectedImg.url}\n                width={this.selectedImg.width}\n                height={this.selectedImg.height}\n                alt=\"zoomImg\"\n              />\n            </div>\n          </Modal>\n        }\n        <div className=\"chat-message-layout\">\n          {whoIsSender === 1 ?\n            <div className=\"chat-message-wrap chat-message-wrap-right\">\n              <div style={{ maxWidth: `${withMsg.currentSender}px` }} className=\"chat-message-container-position-right\">\n                {message.attachment ?\n                  this._renderAsAttachment(1) :\n                  this._renderAsStr(1)\n                }\n              </div>\n            </div> :\n            <div className=\"chat-message-wrap chat-message-wrap-left\">\n              <div className=\"chat-message-avatar\">\n                {notRenderAvatar &&\n                  <Avatar photo={participantInfo.avatar} name={participantInfo.name || participantInfo.full_name} size={30} />\n                }\n              </div>\n              <div style={{ maxWidth: `${message.attachment ? withMsg.otherSender + 60 : withMsg.otherSender}px` }} className=\"chat-message-container-position-left\">\n                {message.attachment ?\n                  this._renderAsAttachment(2) :\n                  this._renderAsStr(2)\n                }\n              </div>\n            </div>\n          }\n        </div>\n      </>\n    )\n  }\n}\n\n","import React, { PureComponent } from 'react'\nimport Avatar from '../../../helpers/avatar/avatar'\nimport ChatInput from './chatInput/chatInput'\nimport { connect } from 'react-redux'\nimport ChatService from '../../../services/chat-service'\nimport UsersService from '../../../services/users-service'\nimport { RecyclerListView, DataProvider } from \"recyclerlistview/web\"\nimport { ChatLayoutUtil } from '../../../helpers/LayoutUtil'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport store from '../../../store'\nimport Loader from '../../../helpers/loader/loader'\nimport { faChevronLeft } from '@fortawesome/free-solid-svg-icons'\nimport Message from './message/message'\n\nimport './chat.css'\n\nclass Chat extends PureComponent {\n  scrollWidth = 0\n  scrollHeight = 0\n  listenerWindowSize = null\n  timer = null\n  isFetchingMsg = false\n  messagesListRef = null\n  listenerLazyLoad = false\n  needToGetMoreMessage = null\n\n\n  recycler_Y = 0\n  contentHeight = 0\n  contentNewOffset = 0\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      isAlredy: true,\n      dataProvider: new DataProvider((r1, r2) => {\n        return r1 !== r2 || r1.send_state !== r2.send_state\n      }),\n      layoutProvider: []\n    }\n    this.currentUserInfo = store.getState().currentUser.user\n  }\n\n\n  lazyLoadMessages = (elem, y) => {\n    this.recycler_Y = y\n    this.contentHeight = elem.nativeEvent.contentSize.height\n    if (this.listenerLazyLoad && this.needToGetMoreMessage && y < 2000) {\n      this.listenerLazyLoad = false\n      ChatService.getMoreMessages(this.props.selectedDialog)\n        .then(amountMessages => {\n          amountMessages === 100 ? this.needToGetMoreMessage = true : this.needToGetMoreMessage = false\n          this.listenerLazyLoad = true\n        })\n    }\n  }\n\n  getDialogInfo = async () => {\n    const dialog = ChatService.getDialogById(this.props.selectedDialog.id)\n\n    // get info about occupants\n    await UsersService.getOccupants(dialog.occupants_ids)\n\n    ChatService.getMessages(dialog)\n      .catch(e => alert(`Error.\\n\\n${JSON.stringify(e)}`))\n      .then(amountMessages => {\n        amountMessages === 100 ? this.needToGetMoreMessage = true : this.needToGetMoreMessage = false\n        this.setState({\n          isFetchingMsg: true,\n          layoutProvider: ChatLayoutUtil.getChatLayoutProvider({\n            width: this.scrollWidth,\n            dialogId: dialog.id,\n            currentUserId: this.currentUserInfo.id\n          }),\n          dataProvider: this.state.dataProvider.cloneWithRows(this.props.messages[dialog.id])\n        })\n        this.scrollToBottom()\n        this.listenerLazyLoad = true\n      })\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.handleResize)\n    this.scrollWidth = document.getElementById('chat-body').clientWidth\n    this.scrollHeight = document.getElementById('chat-body').clientHeight\n    this.getDialogInfo()\n  }\n\n  componentDidUpdate(prewProps) {\n    const dialog = ChatService.getDialogById(this.props.selectedDialog.id)\n\n    if (prewProps.messages[dialog.id] &&\n      prewProps.messages[dialog.id] !== this.props.messages[dialog.id]\n    ) {\n      console.log('{chat} prew props', prewProps.messages[dialog.id])\n      console.log('{chat} this props', this.props.messages[dialog.id])\n\n      if (this.props.messages[dialog.id].length) {\n        this.setState({\n          dataProvider: this.state.dataProvider.cloneWithRows(this.props.messages[dialog.id])\n        }, () => { this.updateScrollPosition() }\n        )\n      }\n    }\n  }\n\n  updateScrollPosition = () => {\n    setTimeout(() => {\n      const getElement = document.getElementById('chat-body').children[0].children[0].children[0].style.height\n      const fullScrollHeight = getElement.slice(0, getElement.length - 2)\n      const newOffset = this.recycler_Y + (fullScrollHeight - this.contentHeight)\n      this.messagesListRef.scrollToOffset(0, newOffset)\n    }, 100)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize)\n  }\n\n  handleResize = () => {\n    this.scrollWidth = document.getElementById('chat-body').clientWidth\n    this.scrollHeight = document.getElementById('chat-body').clientHeight\n    if (!this.timer) {\n      const dialog = ChatService.getDialogById(this.props.selectedDialog.id)\n      this.timer = setTimeout(() => {\n        clearTimeout(this.timer)\n        this.timer = null\n        this.setState({\n          isAlredy: true,\n          layoutProvider: ChatLayoutUtil.getChatLayoutProvider({\n            width: this.scrollWidth,\n            dialogId: dialog.id,\n            currentUserId: this.currentUserInfo.id\n          })\n        })\n      }, 500)\n    }\n  }\n\n  sendMessageCallback = async (messageText, img) => {\n    const dialog = ChatService.getDialogById(this.props.selectedDialog.id)\n    if (messageText.length <= 0 && !img) return\n    await ChatService.sendMessage(dialog, messageText, img, this.scrollToBottom)\n  }\n\n  goToSplashPage = () => {\n    const { router } = this.props\n    router('/home')\n  }\n\n  _renderMessage = (type, item) => {\n    const { users } = this.props\n    // 1 - current sender & 2 - other sender\n    const whoIsSender = this.currentUserInfo.id === item.sender_id ? 1 : 2\n    const participantInfo = whoIsSender === 2 ? users[item.sender_id] : null\n    let notRenderAvatar = null\n\n    if (type > 0 && whoIsSender !== 1 &&\n      +this.state.dataProvider._data[type - 1].sender_id !== +item.sender_id) {\n      notRenderAvatar = true\n    }\n\n    return (\n      <Message\n        whoIsSender={whoIsSender}\n        message={item}\n        participantInfo={participantInfo}\n        notRenderAvatar={notRenderAvatar}\n        widthScroll={this.scrollWidth}\n      />\n    )\n  }\n\n  getDialogById = () => {\n    return ChatService.getDialogById(this.props.selectedDialog.id)\n  }\n\n  scrollToBottom = () => {\n    if (this.messagesListRef) {\n      this.messagesListRef.scrollToIndex(this.state.dataProvider._data.length - 1, false)\n    }\n  }\n\n  render() {\n    const { dataProvider, layoutProvider, isAlredy, isFetchingMsg } = this.state\n    const { selectedDialog } = this.props\n    let currentDialog\n\n    if (selectedDialog) {\n      currentDialog = this.getDialogById()\n    }\n\n    return (\n      <div className=\"chat-container\" >\n        <header>\n          {window.innerWidth < 768 &&\n            <button onClick={this.goToSplashPage}>\n              <FontAwesomeIcon icon={faChevronLeft} color={'#212529'} />\n              Back\n            </button>\n          }\n          <Avatar photo={currentDialog.photo} name={currentDialog.name} size={50} />\n          <h3>{currentDialog.name}</h3>\n        </header>\n        <div className=\"chat-body\" id=\"chat-body\">\n          {isAlredy && isFetchingMsg ?\n            dataProvider._data.length > 0 &&\n            <>\n              <RecyclerListView\n                style={{\n                  width: this.scrollWidth,\n                  height: this.scrollHeight,\n                }}\n                ref={ref => this.messagesListRef = ref}\n                dataProvider={dataProvider}\n                layoutProvider={layoutProvider}\n                rowRenderer={this._renderMessage}\n                onScroll={(elem, x, y) => {\n                  this.lazyLoadMessages(elem, y)\n                }}\n              />\n            </> : <Loader />\n          }\n        </div>\n        <ChatInput sendMessageCallback={this.sendMessageCallback} />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = ({ selectedDialog, messages, users }) => ({\n  selectedDialog,\n  messages,\n  users\n})\n\nexport default connect(mapStateToProps)(Chat)","import React from 'react'\nimport './splashPage.css'\n\nexport default function SplashPage() {\n  return (\n    <div className=\"splash-page-container\">\n      <p>Please select a chat to start messaging</p>\n    </div>\n  )\n}\n","import React from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronLeft } from '@fortawesome/free-solid-svg-icons'\nimport './header.css'\n\nexport default function createDialogHeader({ router }) {\n  function goToSplashPage() {\n    router('/home/')\n  }\n  return (\n    <div className=\"create-dialog-header\">\n      <button onClick={goToSplashPage}>\n        <FontAwesomeIcon icon={faChevronLeft} color={'black'} />\n        <span>Back</span>\n      </button>\n    </div>\n  )\n}","import React, { PureComponent } from 'react'\nimport Avatar from '../../../../helpers/avatar/avatar'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faDotCircle } from '@fortawesome/free-solid-svg-icons'\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons'\nimport { faArrowRight } from '@fortawesome/free-solid-svg-icons'\nimport './renderUser.css'\n\nexport default class User extends PureComponent {\n  state = {\n    isSelectedUser: false\n  }\n\n  toggleUserSelect() {\n    const { selectUsers, user } = this.props\n    selectUsers(user)\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.selectedUsers !== this.props.selectedUsers) {\n      this.setState({ isSelectedUser: this.props.selectedUsers })\n    }\n  }\n\n  render() {\n    const { user, selectedUsers, dialogType } = this.props\n    const { isSelectedUser } = this.state\n    return (\n      <div className=\"render-search-user\" onClick={() => this.toggleUserSelect()}>\n        <div className=\"render-search-user-info\">\n          <Avatar photo={user.avatar} name={user.full_name} size={40} />\n          <span>{user.full_name}</span>\n        </div>\n        {dialogType ? isSelectedUser || selectedUsers ? (\n          <FontAwesomeIcon icon={faCheckCircle} color={'green'} />\n        ) : (\n            <FontAwesomeIcon icon={faDotCircle} color={'black'} />\n          ) : <FontAwesomeIcon icon={faArrowRight} color={'green'} />\n        }\n      </div>\n    )\n  }\n}\n\n","import React, { PureComponent } from 'react';\nimport CreateDialogHeader from './createDialogHeader/header'\nimport ImagePicker from '../../../helpers/imagePicker/imagePicker'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUser } from '@fortawesome/free-solid-svg-icons'\nimport { faUsers } from '@fortawesome/free-solid-svg-icons'\nimport { faSearch } from '@fortawesome/free-solid-svg-icons'\nimport { faTimesCircle } from '@fortawesome/free-solid-svg-icons'\nimport UsersService from '../../../services/users-service'\nimport ChatService from '../../../services/chat-service'\nimport Loader from '../../../helpers/loader/loader'\nimport swal from 'sweetalert'\nimport Avatar from '../../../helpers/avatar/avatar'\n\nimport RenderUser from './renderUser/renderUser'\n\nimport './createDialog.css'\n\nexport default class CreateDialog extends PureComponent {\n  listUsers = []\n  userNotFound = false\n  selectedUsers = []\n  isGroupDetails = false\n  image = null\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      keyword: '',\n      isLoader: false,\n      dialogType: false,\n      dialogName: '',\n      isUpdate: false,\n    }\n  }\n\n  toggleUserSelect = (user) => {\n    let newArr = []\n    this.selectedUsers.forEach(elem => {\n      if (elem.id !== user.id) {\n        newArr.push(elem)\n      }\n    })\n    this.selectedUsers = newArr\n    this.setState({ isUpdate: !this.state.isUpdate })\n  }\n\n  getImage = (image) => {\n    this.image = image\n  }\n\n  createDialog = () => {\n    let str = this.state.dialogName.trim()\n    const { router } = this.props\n\n    if (str.length < 3) {\n      return swal('Warning', 'Enter more than 4 characters for group subject')\n    }\n    this.setState({ isLoader: true })\n    const occupants_ids = this.selectedUsers.map(elem => {\n      return elem.id\n    })\n    ChatService.createPublicDialog(occupants_ids, str, this.image)\n      .then((newDialog) => {\n        this.setState({ isLoader: false })\n        ChatService.setSelectDialog(newDialog)\n        ChatService.sendChatAlertOnCreate(newDialog)\n        router('/home/chat')\n      })\n      .catch((error) => {\n        this.setState({ isLoader: false })\n        swal('Error', error)\n      })\n  }\n\n  searchUsers = (e) => {\n    e.preventDefault()\n    const { keyword } = this.state\n    let str = keyword.trim()\n    if (str.length > 2) {\n      this.setState({ isLoader: true })\n      UsersService.listUsersByFullName(str)\n        .then(users => {\n          this.listUsers = users\n          this.userNotFound = false\n          this.setState({ isLoader: false })\n        })\n        .catch(() => {\n          this.userNotFound = true\n          this.setState({ isLoader: false })\n        })\n    } else {\n      swal('Warning', `Enter more than 3 characters`)\n    }\n  }\n\n  changeTypeDialog = () => {\n    this.selectedUsers = []\n    this.setState({ dialogType: !this.state.dialogType })\n  }\n\n  selectUsers = (user) => {\n    const { router } = this.props\n\n    // False - Private dialog \n    if (!this.state.dialogType) {\n      return ChatService.createPrivateDialog(user.id)\n        .then((newDialog) => {\n          ChatService.setSelectDialog(newDialog)\n          ChatService.sendChatAlertOnCreate(newDialog)\n          router('/home/chat')\n        })\n        .catch((error) => {\n          this.setState({ isLoader: false })\n          swal('Error', error)\n        })\n    }\n\n    // True - Publick dialog \n    const userSelect = this.selectedUsers.find(elem => elem.id === user.id)\n    if (userSelect) {\n      let newArr = []\n      this.selectedUsers.forEach(elem => {\n        if (elem.id !== user.id) {\n          newArr.push(elem)\n        }\n      })\n      this.selectedUsers = newArr\n    } else {\n      if (this.selectedUsers.length === 9) {\n        swal('Warning', `Maximum 9 participants`)\n        return\n      }\n      this.selectedUsers.push(user)\n    }\n    this.setState({ isUpdate: !this.state.isUpdate })\n  }\n\n  _renderUser = (item) => {\n    const isSelected = this.selectedUsers.find(elem => elem.id === item.id)\n    return (\n      <RenderUser\n        user={item}\n        selectUsers={this.selectUsers}\n        dialogType={this.state.dialogType}\n        selectedUsers={isSelected ? true : false}\n        key={item.id}\n      />\n    )\n  }\n\n  changeSearch = (event) => (this.setState({ keyword: event.target.value }))\n\n  changeDialogName = (event) => (this.setState({ dialogName: event.target.value }))\n\n  _renderSelectedUsers = (elem) => {\n    return (\n      <button\n        key={elem.id}\n        className=\"create-dialog-body-selected-avatar\"\n        onClick={() => this.toggleUserSelect(elem)}\n      >\n        <Avatar\n          photo={elem.avatar}\n          name={elem.full_name}\n          size={40}\n        />\n        <FontAwesomeIcon icon={faTimesCircle} color={'grey'} />\n      </button>\n    )\n  }\n\n  render() {\n    const { router } = this.props\n    const { keyword, dialogType, isLoader, dialogName } = this.state\n    const renderHeader = window.innerWidth < 768 ? 0 : 50\n    const calHeight = dialogType ? 470 - renderHeader : 390 - renderHeader\n\n    return (\n      <div className=\"create-dialog-container\">\n        {window.innerWidth < 768 &&\n          <CreateDialogHeader router={router} />\n        }\n        {isLoader &&\n          <div style={{ position: 'absolute', width: '100%', height: '100%' }}>\n            <Loader />\n          </div>\n        }\n        <div className=\"create-dialog-body\">\n          <div className=\"create-dialog-body-groupinfo\">\n            <ImagePicker getImage={this.getImage} />\n            <input\n              type=\"text\"\n              placeholder=\"Group Subject\"\n              value={dialogName}\n              onChange={this.changeDialogName} />\n          </div>\n          <form className=\"create-dialog-body-search\" onSubmit={this.searchUsers}>\n            <input\n              type=\"text\"\n              value={keyword}\n              onChange={this.changeSearch}\n              required\n              placeholder=\"Type contact name\"\n              name=\"search\" />\n            <button onClick={this.searchUsers}>\n              <FontAwesomeIcon icon={faSearch} color={'white'} />\n            </button>\n          </form>\n\n          <div className=\"create-dialog-body-type-dialog\">\n            <button onClick={this.changeTypeDialog}>\n              {dialogType ? <FontAwesomeIcon icon={faUsers} color={'#27ae60'} /> :\n                <FontAwesomeIcon icon={faUser} color={'#27ae60'} />\n              }\n              <span>{dialogType ? `Create private chat` : `Create group chat`}</span>\n            </button>\n          </div>\n\n          {dialogType && this.selectedUsers.length > 0 &&\n            <div className=\"create-dialog-body-selected-users\">\n              {this.selectedUsers.map(elem => (\n                this._renderSelectedUsers(elem)\n              ))\n              }\n            </div>\n          }\n\n          {this.userNotFound ?\n            <h5>Couldn't find user</h5> :\n            <div className=\"create-dialog-body-users\" style={{ height: `calc(100vh - ${calHeight}px)` }}>\n              {\n                this.listUsers.map((elem) => {\n                  return (\n                    this._renderUser(elem)\n                  )\n                })\n              }\n            </div>\n          }\n\n          {this.selectedUsers.length > 0 &&\n            <div className=\"create-dialog-body-btn\">\n              <button onClick={this.createDialog}>Create grup</button>\n            </div>\n          }\n        </div>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react'\nimport { Row, Col } from 'react-bootstrap'\nimport { Route, Redirect, BrowserRouter as Router } from \"react-router-dom\"\nimport ChatService from '../../services/chat-service'\nimport SideBar from './sideBar/sideBar'\nimport Chat from './chat/chat'\nimport SplashPage from './splashPage/splashPage'\nimport CreateDialog from './createDialog/createDialog'\nimport Auth from '../auth/auth'\nimport './home.css'\n\n\nexport default class Home extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      routName: false,\n      routerUrl: props.match.url\n    }\n    props.history.replace(\"/home\")\n    this.windowWidth = window.innerWidth\n  }\n\n  componentDidMount() {\n    ChatService.setUpListeners()\n  }\n\n  changeRouter = (router) => {\n    this.setState({ routerUrl: router })\n  }\n\n  render() {\n    const { routerUrl } = this.state\n    const { match } = this.props\n\n    return (\n      <div className=\"home-frame\">\n        <div className=\"home-active-container\">\n          {this.windowWidth >= 768 ?\n            <Row className=\"default-row\">\n              <Col sm={12} md={5} lg={5} xl={3} className=\"default-grid\">\n                <SideBar router={this.changeRouter} />\n              </Col>\n              <Col sm={12} md={7} lg={7} xl={9} className=\"default-grid\">\n                <Router>\n                  <Route\n                    exact\n                    path={`${match.url}`}\n                    component={SplashPage}\n                  />\n                  <Route\n                    path={`${match.url}/create-dialog`}\n                    component={() => <CreateDialog router={this.changeRouter} />}\n                  />\n                  <Route\n                    path={`${match.url}/chat`}\n                    component={() => <Chat router={this.changeRouter} />}\n                  />\n                  <Redirect to={routerUrl} />\n                </Router>\n              </Col>\n            </Row> :\n\n            <Row>\n              <Col sm={12} md={5} lg={5} xl={3} className=\"default-grid\">\n                <Router>\n                  <Route\n                    exact\n                    path={`${match.url}`}\n                    component={() => <SideBar router={this.changeRouter} />}\n                  />\n                  <Route\n                    path={`${match.url}/create-dialog`}\n                    component={() => <CreateDialog router={this.changeRouter} />}\n                  />\n                  <Route\n                    path={`${match.url}/chat`}\n                    component={() => <Chat router={this.changeRouter} />}\n                  />\n                  <Route\n                    path={`/auth`}\n                    component={() => <Auth isSmallDevice />}\n                  />\n                  <Redirect to={routerUrl} />\n                </Router>\n              </Col>\n            </Row>\n          }\n        </div>\n      </div>\n    )\n  }\n}\n\n","import React, { Component } from 'react'\nimport { Provider } from 'react-redux'\nimport {\n  BrowserRouter as Router,\n  Route,\n  Redirect\n} from \"react-router-dom\"\nimport ChatService from '../services/chat-service'\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css'\nimport store from '../store'\nimport AuthService from '../services/auth-service'\nimport Auth from './auth/auth'\nimport Home from './home/home'\nimport Loader from '../helpers/loader/loader'\n\n\nexport default class Main extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      routName: false,\n      isLoader: true\n    }\n    this.initUser()\n  }\n\n  initUser = async () => {\n    const routLink = await AuthService.init()\n    this.setState({ routName: routLink, isLoader: false })\n  }\n\n  render() {\n    const { routName, isLoader } = this.state\n    return (\n\n      <Router>\n        <Provider store={store}>\n          {isLoader ?\n            <div style={{ position: 'absolute', width: '100%', height: '100%' }}>\n              <Loader />\n            </div>\n            : <>\n              <Route path=\"/home\" component={Home} />\n              <Route path=\"/auth\" component={Auth} />\n              <Redirect to={routName} />\n            </>\n          }\n        </Provider>\n      </Router>\n    )\n  }\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Main from './components/main'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<Main />, document.getElementById('root'))\n\nserviceWorker.unregister()\n"],"sourceRoot":""}